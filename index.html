<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="pt">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Classificar Condições Sensíveis à Atenção Primária • csapAIH</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Classificar Condições Sensíveis à Atenção Primária">
<meta name="description" content="Classifica um vetor com códigos da CID-10 segundo a Lista Brasileira de Condições Sensíveis à Atenção Primária e oferece outras funções, especialmente para o manejo dos arquivos da AIH (BD-SIH/SUS).">
<meta property="og:description" content="Classifica um vetor com códigos da CID-10 segundo a Lista Brasileira de Condições Sensíveis à Atenção Primária e oferece outras funções, especialmente para o manejo dos arquivos da AIH (BD-SIH/SUS).">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">csapAIH</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.4.6</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/indicadores.html">indicadores</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/fulvionedel/csapAIH/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><p>csapAIH: <font size="2"> Classificar Condições Sensíveis à Atenção Primária</font> ================ Fúlvio Borges Nedel Atualizado em 16 de fevereiro de 2025</p>
<ul>
<li><a href="#apresenta%C3%A7%C3%A3o">Apresentação</a></li>
<li><a href="#justificativa">Justificativa</a></li>
<li><a href="#instala%C3%A7%C3%A3o">Instalação</a></li>
<li><a href="#conte%C3%BAdo-timeline">Conteúdo (<em>timeline</em>)</a></li>
<li><a href="#depend%C3%AAncias">Dependências</a></li>
<li>
<a href="#exemplos-de-uso">Exemplos de uso</a>
<ul>
<li>
<a href="#classifica%C3%A7%C3%A3o-da-causa-c%C3%B3digo-cid-10">Classificação da causa (código CID-10)</a>
<ul>
<li><a href="#em-arquivos-de-dados">Em arquivos de dados</a></li>
<li><a href="#em-um-banco-de-dados-existente-na-sess%C3%A3o-de-trabalho">Em um banco de dados existente na sessão de trabalho</a></li>
<li><a href="#a-partir-de-uma-vari%C3%A1vel-com-c%C3%B3digos-da-cid-10">A partir de uma variável com códigos da CID-10:</a></li>
</ul>
</li>
<li>
<a href="#apresenta%C3%A7%C3%A3o-de-resultados">Apresentação de resultados</a>
<ul>
<li><a href="#resumo-de-importa%C3%A7%C3%A3o-de-dados">Resumo de importação de dados</a></li>
<li><a href="#tabela-bruta">Tabela “bruta”</a></li>
<li><a href="#tabela-para-apresenta%C3%A7%C3%A3o">Tabela para apresentação</a></li>
<li><a href="#calcular-taxas">Calcular taxas</a></li>
<li><a href="#gr%C3%A1ficos">Gráficos</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#agradecimentos">Agradecimentos</a></li>
<li><a href="#refer%C3%AAncias">Referências</a></li>
</ul>
<hr>
<p>No <a href="https://sourceforge.net/projects/csapaih/" class="external-link">SourceForge</a>: <a href="https://sourceforge.net/projects/csapaih/files/latest/download" class="external-link"><img src="https://img.shields.io/sourceforge/dt/csapaih.svg" alt="Download csapAIH"></a> <a href="https://sourceforge.net/projects/csapaih/files/latest/download" class="external-link"><img src="https://img.shields.io/sourceforge/dm/csapaih.svg" alt="Download csapAIH"></a></p>
<hr>
<div class="section level1">
<div class="page-header"><h1 id="apresentação">Apresentação<a class="anchor" aria-label="anchor" href="#apresenta%C3%A7%C3%A3o"></a>
</h1></div>
<p>Pacote em <strong>R</strong> para a classificação de códigos da CID-10 (Classificação Internacional de Doenças, 10ª Revisão) segundo a Lista Brasileira de Internações por Condições Sensíveis à Atenção Primária (ICSAP). É particularmente voltado ao trabalho com as bases de dados do Sistema de Informações Hospitalares do SUS, o Sistema Único de Saúde brasileiro. Tais bases (BD-SIH/SUS) contêm os “arquivos da AIH” (<code>RD??????.DBC</code>), que podem ser expandidos para o formato DBF (<code>RD??????.DBF</code>), com as informações de cada hospitalização ocorrida pelo SUS num período determinado. Assim, embora o pacote permita a classificação de qualquer listagem de códigos da CID-10, tem também algumas funcionalidades para facilitar o trabalho com os “arquivos da AIH” e, atualmente, do Sistema de Informações sobre Mortalidade (SIM). Inclui ainda as estimativas e contagens populacionais por sexo e faixa etária para os municípios brasileiros, de 2012 a 2024.</p>
</div>
<div class="section level1">
<h1 id="justificativa">Justificativa<a class="anchor" aria-label="anchor" href="#justificativa"></a>
</h1>
<p>A hospitalização por CSAP é um indicador da efetividade do sistema de saúde em sua primeira instância de atenção, uma vez que a internação por tais condições —pneumonia, infecção urinária, sarampo, diabetes etc.— só acontecerá se houver uma falha do sistema nesse âmbito de atenção, seja por não prevenir a ocorrência da doença (caso das doenças evitáveis por vacinação, como o sarampo), não diagnosticá-la ou tratá-la a tempo (como na pneumonia ou infeccão urinária) ou por falhar no seu controle clínico (como é o caso da diabete). (<a href="#ref-Nedel2011">Nedel et al. 2011</a>)</p>
<p>O Ministério da Saúde brasileiro estabeleceu em 2008, após amplo processo de validação, uma lista com várias causas de internação hospitalar consideradas CSAP, definindo em portaria a Lista Brasileira. (<a href="#ref-MS2008lista">Brasil. Ministério da Saúde. Secretaria de Atenção à Saúde 2008</a>; <a href="#ref-Alfradique2009">Alfradique et al. 2009</a>) A Lista envolve vários códigos da CID-10 e classifica as CSAP em 19 subgrupos de causa, o que torna complexa e trabalhosa a sua decodificação. Há alguns anos o Departamento de Informática do SUS (DATASUS) incluiu em seu excelente programa de tabulação de dados <a href="https://datasus.saude.gov.br/transferencia-de-arquivos/" class="external-link">TabWin</a> a opção de tabulação por essas causas, apresentando sua frequência segundo a tabela definida pelo usuário.</p>
<p>Entretanto, muitas vezes a pesquisa exige a classificação de cada internação individual como uma variável na base de dados. (<a href="#ref-Nedel2008">Nedel et al. 2008</a>) E não conheço outro programa ou <em>script</em> (além do que tive de escrever em minha tese (<a href="#ref-NedelTese">Nedel 2009</a>)) que automatize esse trabalho.</p>
</div>
<div class="section level1">
<h1 id="instalação">Instalação<a class="anchor" aria-label="anchor" href="#instala%C3%A7%C3%A3o"></a>
</h1>
<p>O pacote <code>csapAIH</code> pode ser instalado no <strong>R</strong> de diferentes maneiras:</p>
<ul>
<li><p>baixando o arquivo de instalação no <a href="https://sourceforge.net/projects/csapaih/" class="external-link">SourceForge</a> e depois instalando, com a IDE de preferência ou com o comando <code>install.packages("csapAIH_&lt;versão&gt;.tar.gz")</code> (em Linux ou Mac) ou <code>install.packages("csapAIH_&lt;versão&gt;.zip")</code> (em Windows);</p></li>
<li><p>com a função <code><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages()</a></code> sobre o arquivo tar.gz no <a href="https://sourceforge.net/projects/csapaih/" class="external-link">SourceForge</a> <a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;Como informado por &lt;a href="https://github.com/fulvionedel/csapAIH/issues/13#top" class="external-link"&gt;Rafael Barros&lt;/a&gt;, a instalação pelo arquivo .zip da internet resulta em erro. Estranhamente (pra mim, ao menos), uma vez baixado, o arquivo .zip é instalado sem erro.&lt;/p&gt;'><sup>1</sup></a>:</p></li>
</ul>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"https://sourceforge.net/projects/csapaih/files/csapAIH_0.0.4.5.tar.gz/download"</span>, type <span class="op">=</span> <span class="st">"source"</span>, repos <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span> </span></code></pre></div>
<p>ou</p>
<ul>
<li>através do pacote <code>remotes</code> sobre os arquivos-fonte da versão em desenvolvimento, no <a href="https://github.com/fulvionedel/csapAIH" class="external-link">GitHub</a>:</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("remotes") # desnecessário se o pacote já estiver instalado</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"fulvionedel/csapAIH"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level1">
<h1 id="conteúdo-timeline">Conteúdo (<em>timeline</em>)<a class="anchor" aria-label="anchor" href="#conte%C3%BAdo-timeline"></a>
</h1>
<p>Na sua primeira versão (<a href="#ref-Nedel2017">Nedel 2017</a>), o pacote <code>csapAIH</code> continha apenas uma função, homônima: <code>csapAIH</code>.</p>
<p>Na versão 0.0.2, foram acrescentadas as funções <code>descreveCSAP</code>, <code>desenhaCSAP</code> e <code>nomesgruposCSAP</code>, para a representação gráfica e tabular das CSAP pela lista brasileira. Esta versão também permite a leitura de arquivos da AIH em formato .DBC, sem necessidade de prévia expansão a .DBF. Isso é possível pelo uso do pacote <code>read.dbc</code>, de Daniela Petruzalek (<a href="https://cran.r-project.org/web/packages/read.dbc/index.html" class="external-link uri">https://cran.r-project.org/web/packages/read.dbc/index.html</a>).</p>
<p>A partir da versão 0.0.3 (<a href="#ref-Nedel2019">Nedel 2019</a>), a função <code>desenhaCSAP</code> permite o detalhamento do gráfico por categorias de outros fatores do banco de dados, com o uso das funções <code>facet_wrap()</code> e <code>facet_grid()</code>, de <code>ggplot2</code>, e permite ainda o desenho de gráficos com as funções básicas, sem a instalação do pacote <code>ggplot2</code>. Foi ainda criada uma função para o cálculo da idade nos arquivos da AIH: a função <code>idadeSUS</code> é usada internamente por <code>csapAIH</code> e pode ser chamada pelo usuário para calcular a idade sem a necessidade de classificar as CSAP.</p>
<p>Na versão 0.0.4, a função <code>csapAIH</code> oferece a opção de classificação das CSAP em 20 grupos de causa, conforme proposto no processo de construção da Lista Brasileira (<a href="#ref-Alfradique2009">Alfradique et al. 2009</a>). Essa é a lista sugerida pela Organização Panamericana da Saúde (<a href="#ref-OPS2014">Organización Panamericana de la Salud (OPS) 2014</a>). As funções <code>desenhaCSAP</code> e <code>tabCSAP</code> têm um argumento para seleção do idioma dos nomes de grupos, em português (<code>pt</code>, padrão), espanhol (<code>es</code>) ou inglês (<code>en</code>). Foram criadas as funções <code>ler_popbr</code> e <code>popbr2000_2021</code> (esta sobre o pacote <a href="https://cran.r-project.org/package=brpop" class="external-link">brpop</a> de R. Saldanha (<a href="#ref-brpopref">2022</a>)) para acesso às estimativas populacionais publicadas pelo DATASUS e funções para categorização da idade em faixas etárias. Foi ainda criada uma função (<code>fetchcsap</code>) a partir da função <code>fetchdatasus</code> do pacote <code>microdatasus</code>(<a href="#ref-Saldanha2019">R. de F. Saldanha, Bastos, and Barcellos 2019</a>), para ler os arquivos no site FTP do DATASUS e classificar as CSAP em um único comando. Foram criadas outras funções para facilitar o manejo e apresentação de dados em estudos ecológicos, como a categorização da idade em faixas etárias (<code>fxetar_quinq</code> e <code>fxetar3g</code>) e a identificação dos diagnósticos de parto (<code>partos</code>), particularmente para o Brasil e os arquivos do DATASUS, como a listagem das Unidades da Federação do país (<code>ufbr</code>) e a lista de procedimentos obstétricos em internações por eventos não mórbidos (<code>procobst</code>). A v0.0.4.5 corrige um erro introduzido na v0.0.4.4 em <code>csapAIH</code>, em que a variável <code>csap</code> registrava todos os casos como “não” (embora estivessem classificados corretamente na variável <code>grupo</code>). A v0.0.4.6 corrige um erro em <code>ler_popbr</code> e, principalmente, acrescenta a possibilidade de leitura dos arquivos com as estimativas populacionais atualizadas após o Censo 2022 do IBGE, além de incluir novas possiblidades em <code>nomesgruposCSAP</code>.</p>
<p>A ajuda sobre o pacote oferece mais detalhes sobre as funções e seu uso. Veja no <a href="https://github.com/fulvionedel/csapAIH/blob/master/docs/csapAIH_0.0.4.6.pdf" class="external-link">manual</a> ou, no R, com <code><a href="reference/csapAIH-package.html">?'csapAIH-package'</a></code>.</p>
</div>
<div class="section level1">
<h1 id="dependências">Dependências<a class="anchor" aria-label="anchor" href="#depend%C3%AAncias"></a>
</h1>
<p>A leitura de arquivos .DBC exige a instalação prévia do pacote <a href="https://cran.r-project.org/web/packages/read.dbc/index.html" class="external-link"><code>read.dbc</code></a> (<a href="#ref-readdbc">Petruzalek 2016</a>). Sua falta não impede o funcionamento das demais funções do pacote (inclusive de leitura de arquivos em outro formato). Da mesma forma, <code>popbr2000_2021</code> exige a instalação do pacote<a href="https://rfsaldanha.github.io/brpop/" class="external-link"><code>brpop</code></a> e <code>fetchcsap</code> exige a instalação do pacote <a href="https://github.com/rfsaldanha/microdatasus" class="external-link"><code>microdatasus</code></a>.</p>
<p>A função <code>desenhaCSAP</code> tem melhor desempenho com o pacote <code>ggplot2</code> instalado, mas sua instalação não é necessária para que ela funcione.</p>
<p>A função <code>popbr2000_2021</code> usa o pacote <a href="https://cran.r-project.org/package=dplyr" class="external-link"><code>dplyr</code></a>, que é importado. O pacote <a href="https://cran.r-project.org/package=haven" class="external-link"><code>haven</code></a> também é importado. A partir da v0.0.4.4 <a href="https://cran.r-project.org/web/packages/Hmisc/index.html" class="external-link"><code>Hmisc</code></a> não é mais. <!-- O código da função `???` é escrito com a função de encadeamento de comandos  ("_piping_") própria do R ("|>") e seu uso exige, portanto, R>=4.1.0 (espero não gerar outro problema como [esse](https://github.com/fulvionedel/csapAIH/issues/5). --></p>
</div>
<div class="section level1">
<h1 id="exemplos-de-uso">Exemplos de uso<a class="anchor" aria-label="anchor" href="#exemplos-de-uso"></a>
</h1>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span> <span class="co"># facilitar o trabalho</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/fulvionedel/csapAIH" class="external-link">csapAIH</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="classificação-da-causa-código-cid-10">Classificação da causa (código CID-10)<a class="anchor" aria-label="anchor" href="#classifica%C3%A7%C3%A3o-da-causa-c%C3%B3digo-cid-10"></a>
</h2>
<div class="section level3">
<h3 id="em-arquivos-de-dados">Em arquivos de dados<a class="anchor" aria-label="anchor" href="#em-arquivos-de-dados"></a>
</h3>
<p>É possível classificar as CSAP diretamente a partir de arquivos com extensão .DBC, .DBF, ou .CSV, sem necessidade da leitura prévia dos dados. Para outras extensões de arquivo é necessária a prévia importação dos dados para um objeto de classe <code>data.frame</code>.</p>
<div class="section level4">
<h4 id="arquivos-do-datasus">Arquivos do DATASUS<a class="anchor" aria-label="anchor" href="#arquivos-do-datasus"></a>
</h4>
<p>Através de seu site FTP, o DATASUS disponibiliza dados de diferentes Sistemas de Informação em Saúde do SUS, em arquivos comprimidos de extensão DBC. Os arquivos podem ser baixados na página de <a href="https://datasus.saude.gov.br/transferencia-de-arquivos/" class="external-link">transferência de arquivos</a> do DATASUS e expandidos para DBF ou CSV (entre várias outras possibilidades de manejo) pelo TabWin, disponível na mesma página. Graças ao pacote <a href="https://github.com/danicat/read.dbc" class="external-link">read.dbc</a>, de Daniela Petruzalek, também podemos ler os arquivos comprimidos do DATASUS no R, e graças ao pacote <a href="https://github.com/rfsaldanha/microdatasus" class="external-link">microdatasus</a>, de Raphael Saldanha (<a href="#ref-Saldanha2019">R. de F. Saldanha, Bastos, and Barcellos 2019</a>), podemos ler com facilidade esses arquivos na internet, sem necessidade de download.</p>
<p>O código abaixo cria um banco com as informações das AIHs do “ano de competência” 2021 ocorridas no RS e outro com as informações das Declarações de Óbito (DO) de residentes no RS ocorridas em 2021:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="co"># remotes::install_github("rfsaldanha/microdatasus") # desnecessário se o pacote estiver instalado</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>AIHRS2021 <span class="ot">&lt;-</span> microdatasus<span class="sc">::</span><span class="fu">fetch_datasus</span>(<span class="at">year_start =</span> <span class="dv">2021</span>, <span class="dv">1</span>, <span class="dv">2021</span>, <span class="dv">12</span>, <span class="at">uf =</span> <span class="st">"RS"</span>, </span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>                                         <span class="at">information_system =</span> <span class="st">"SIH-RD"</span>)</span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="fu">nrow</span>(AIHRS2021) <span class="sc">|&gt;</span> Rcoisas<span class="sc">::</span><span class="fu">formatL</span>(<span class="at">digits =</span> <span class="dv">0</span>) <span class="co"># linhas</span></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"709.893"</span></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a><span class="fu">ncol</span>(AIHRS2021) <span class="co"># colunas</span></span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">113</span></span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a></span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a>DORS2021 <span class="ot">&lt;-</span> microdatasus<span class="sc">::</span><span class="fu">fetch_datasus</span>(<span class="at">year_start =</span> <span class="dv">2021</span>, <span class="at">year_end =</span> <span class="dv">2021</span>, <span class="at">uf =</span> <span class="st">"RS"</span>, </span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a>                                        <span class="at">information_system =</span> <span class="st">"SIM-DO"</span>) </span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a><span class="fu">nrow</span>(DORS2021) <span class="sc">|&gt;</span> Rcoisas<span class="sc">::</span><span class="fu">formatL</span>(<span class="at">digits =</span> <span class="dv">0</span>)</span>
<span id="cb4-12"><a href="#cb4-12" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"117.722"</span></span>
<span id="cb4-13"><a href="#cb4-13" tabindex="-1"></a><span class="fu">ncol</span>(DORS2021)</span>
<span id="cb4-14"><a href="#cb4-14" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">87</span></span></code></pre></div>
<p>Se o arquivo de dados estiver armazenado no computador, basta digitar, entre aspas, o nome do arquivo — com o “<em>path</em>” se o arquivo estiver em diretório diferente daquele da sessão de trabalho ativa (neste exemplo, num sub-diretório do diretório de trabalho da sessão ativa, chamado ‘data-raw’).</p>
<!-- têm o nome de acordo à seguinte estrutura: "RDUFAAMM.DBC", onde "UF" é a Unidade da Federação do hospital de internação e "AA" e "MM" são, respectivamente, o ano e mês "_de referência_", isto é, de faturamento da AIH. Os arquivos são disponibilizados em formato comprimido com a extensão "DBC", na página de ["transferência de arquivos"](https://datasus.saude.gov.br/transferencia-de-arquivos/) do site do DATASUS.  -->
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>csap.dbc <span class="ot">&lt;-</span> <span class="fu">csapAIH</span>(<span class="st">"data-raw/RDRS1801.dbc"</span>) </span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>Importados <span class="fl">60.529</span> registros.</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>Excluídos <span class="fl">8.240</span> (<span class="dv">13</span>,<span class="dv">6</span>%) registros de procedimentos obstétricos.</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>Excluídos <span class="dv">366</span> (<span class="dv">0</span>,<span class="dv">6</span>%) registros de AIH de longa permanência.</span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a>Exportados <span class="fl">51.923</span> (<span class="dv">85</span>,<span class="dv">8</span>%) registros.</span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a>csap.dbf <span class="ot">&lt;-</span> <span class="fu">csapAIH</span>(<span class="st">"data-raw/RDRS1801.dbf"</span>) </span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a>Importados <span class="fl">60.529</span> registros.</span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a>Excluídos <span class="fl">8.240</span> (<span class="dv">13</span>,<span class="dv">6</span>%) registros de procedimentos obstétricos.</span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a>Excluídos <span class="dv">366</span> (<span class="dv">0</span>,<span class="dv">6</span>%) registros de AIH de longa permanência.</span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a>Exportados <span class="fl">51.923</span> (<span class="dv">85</span>,<span class="dv">8</span>%) registros.</span></code></pre></div>
<ul>
<li>No caso de arquivos CSV é mandatório indicar o tipo de separador de campos, com o argumento <code>sep</code>.</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>csap.csv <span class="ot">&lt;-</span> <span class="fu">csapAIH</span>(<span class="st">"data-raw/RDRS1801.csv"</span>, <span class="at">sep =</span> <span class="st">","</span>)</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>Importados <span class="fl">60.529</span> registros.</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a>Excluídos <span class="fl">8.240</span> (<span class="dv">13</span>,<span class="dv">6</span>%) registros de procedimentos obstétricos.</span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a>Excluídos <span class="dv">366</span> (<span class="dv">0</span>,<span class="dv">6</span>%) registros de AIH de longa permanência.</span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a>Exportados <span class="fl">51.923</span> (<span class="dv">85</span>,<span class="dv">8</span>%) registros.</span></code></pre></div>
<p>A função <code>fetchcsap</code> foi pensada para apresentar um extrato dos registros por período de internação e não de “competência” da AIH, que é commo se organizam os arquivos de dados. Assim, precisamos modificar alguns argumentos para ter os mesmos registros:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>csap.ftp <span class="ot">&lt;-</span> <span class="fu">fetchcsap</span>(<span class="st">'RS'</span>, <span class="dv">2018</span>, <span class="at">mesfim =</span> <span class="dv">1</span>, <span class="at">anofim =</span> <span class="dv">2018</span>, <span class="at">periodo =</span> <span class="st">"competencia"</span>)</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>ℹ Your local Internet connection seems to be ok.</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a>ℹ DataSUS FTP server seems to be up and reachable.</span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a>ℹ Starting download...</span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a>Importados <span class="fl">60.529</span> registros.</span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a>Excluídos <span class="fl">8.240</span> (<span class="dv">13</span>,<span class="dv">6</span>%) registros de procedimentos obstétricos.</span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a>Excluídos <span class="dv">366</span> (<span class="dv">0</span>,<span class="dv">6</span>%) registros de AIH de longa permanência.</span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a>Exportados <span class="fl">51.923</span> (<span class="dv">85</span>,<span class="dv">8</span>%) registros.</span></code></pre></div>
<p>Os extratos são iguais:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="fu">all.equal</span>(<span class="fu">attributes</span>(csap.dbc)<span class="sc">$</span>resumo, <span class="fu">attributes</span>(csap.dbf)<span class="sc">$</span>resumo)</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">TRUE</span></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a><span class="fu">all.equal</span>(<span class="fu">attributes</span>(csap.dbc)<span class="sc">$</span>resumo, <span class="fu">attributes</span>(csap.csv)<span class="sc">$</span>resumo)</span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">TRUE</span></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a><span class="fu">all.equal</span>(<span class="fu">attributes</span>(csap.ftp)<span class="sc">$</span>resumo, <span class="fu">attributes</span>(csap.dbc)<span class="sc">$</span>resumo)</span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">TRUE</span></span></code></pre></div>
<p>Mas em estudos epidemiológicos geralmente nos interessa delimitar a população pela data de internação, o que exige trabalho posterior à leitura do arquivo “RD”, pois o arquivo de um determinado mês e ano de “competência” pode conter registros de internações ocorridas em outro momento. Vemos abaixo que a data de internação nos objetos criados anteriormente (a partir de “RDRS1801.dbc”) varia de 01ago2017 a 31out2017. Além disso, o arquivo pode não conter o registro de todas as internações ocorridas naquele mês.</p>
<p>Por isso <code>fetchcsap</code> tem seus argumentos de forma a devolver o banco de dados apenas com os registros do período de interesse. Veja a seguir o resultado com as internações não-obstétricas para jan2018 segundo a seleção dos registros: a. todos daquele mês de competência (mesmo comando anterior para a construção de csap.ftp”); b. apenas as internações ocorridas no mesmo mês de competência da AIH; e c. apenas as internações ocorridas em jan2018 e registradas nor arquivos “RD” dos meses de competência janeiro a fevereiro de 20018.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">fetchcsap</span>(<span class="st">'RS'</span>, <span class="dv">2018</span>, <span class="at">mesfim =</span> <span class="dv">1</span>, <span class="at">anofim =</span> <span class="dv">2018</span>, <span class="at">periodo =</span> <span class="st">"c"</span>)</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>ℹ Your local Internet connection seems to be ok.</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a>ℹ DataSUS FTP server seems to be up and reachable.</span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a>ℹ Starting download...</span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a>Importados <span class="fl">60.529</span> registros.</span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a>Excluídos <span class="fl">8.240</span> (<span class="dv">13</span>,<span class="dv">6</span>%) registros de procedimentos obstétricos.</span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a>Excluídos <span class="dv">366</span> (<span class="dv">0</span>,<span class="dv">6</span>%) registros de AIH de longa permanência.</span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a>Exportados <span class="fl">51.923</span> (<span class="dv">85</span>,<span class="dv">8</span>%) registros.</span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a><span class="fu">nrow</span>(a)</span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">51923</span></span>
<span id="cb9-11"><a href="#cb9-11" tabindex="-1"></a><span class="fu">summary</span>(a<span class="sc">$</span>data.inter)</span>
<span id="cb9-12"><a href="#cb9-12" tabindex="-1"></a>        Min.      <span class="dv">1</span>st Qu.       Median         Mean      <span class="dv">3</span>rd Qu.         Max. </span>
<span id="cb9-13"><a href="#cb9-13" tabindex="-1"></a><span class="st">"2017-06-06"</span> <span class="st">"2017-12-08"</span> <span class="st">"2017-12-28"</span> <span class="st">"2017-12-20"</span> <span class="st">"2018-01-10"</span> <span class="st">"2018-01-31"</span> </span>
<span id="cb9-14"><a href="#cb9-14" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="fu">fetchcsap</span>(<span class="st">'RS'</span>, <span class="dv">2018</span>, <span class="at">mesfim =</span> <span class="dv">1</span>, <span class="at">anofim =</span> <span class="dv">2018</span>)</span>
<span id="cb9-15"><a href="#cb9-15" tabindex="-1"></a>ℹ Your local Internet connection seems to be ok.</span>
<span id="cb9-16"><a href="#cb9-16" tabindex="-1"></a>ℹ DataSUS FTP server seems to be up and reachable.</span>
<span id="cb9-17"><a href="#cb9-17" tabindex="-1"></a>ℹ Starting download...</span>
<span id="cb9-18"><a href="#cb9-18" tabindex="-1"></a>Importados <span class="fl">29.086</span> registros.</span>
<span id="cb9-19"><a href="#cb9-19" tabindex="-1"></a>Excluídos <span class="fl">5.005</span> (<span class="dv">17</span>,<span class="dv">2</span>%) registros de procedimentos obstétricos.</span>
<span id="cb9-20"><a href="#cb9-20" tabindex="-1"></a>Excluídos <span class="cn">NA</span> (<span class="cn">NA</span>%) registros de AIH de longa permanência.</span>
<span id="cb9-21"><a href="#cb9-21" tabindex="-1"></a>Exportados <span class="fl">24.081</span> (<span class="dv">82</span>,<span class="dv">8</span>%) registros.</span>
<span id="cb9-22"><a href="#cb9-22" tabindex="-1"></a><span class="fu">nrow</span>(b)</span>
<span id="cb9-23"><a href="#cb9-23" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">24081</span></span>
<span id="cb9-24"><a href="#cb9-24" tabindex="-1"></a><span class="fu">summary</span>(b<span class="sc">$</span>data.inter)</span>
<span id="cb9-25"><a href="#cb9-25" tabindex="-1"></a>        Min.      <span class="dv">1</span>st Qu.       Median         Mean      <span class="dv">3</span>rd Qu.         Max. </span>
<span id="cb9-26"><a href="#cb9-26" tabindex="-1"></a><span class="st">"2018-01-01"</span> <span class="st">"2018-01-05"</span> <span class="st">"2018-01-11"</span> <span class="st">"2018-01-12"</span> <span class="st">"2018-01-18"</span> <span class="st">"2018-01-31"</span> </span>
<span id="cb9-27"><a href="#cb9-27" tabindex="-1"></a>c <span class="ot">&lt;-</span> <span class="fu">fetchcsap</span>(<span class="st">'RS'</span>, <span class="dv">2018</span>, <span class="at">mesfim =</span> <span class="dv">2</span>, <span class="at">anofim =</span> <span class="dv">2018</span>)</span>
<span id="cb9-28"><a href="#cb9-28" tabindex="-1"></a>ℹ Your local Internet connection seems to be ok.</span>
<span id="cb9-29"><a href="#cb9-29" tabindex="-1"></a>ℹ DataSUS FTP server seems to be up and reachable.</span>
<span id="cb9-30"><a href="#cb9-30" tabindex="-1"></a>ℹ Starting download...</span>
<span id="cb9-31"><a href="#cb9-31" tabindex="-1"></a>Importados <span class="fl">75.818</span> registros.</span>
<span id="cb9-32"><a href="#cb9-32" tabindex="-1"></a>Excluídos <span class="fl">12.363</span> (<span class="dv">16</span>,<span class="dv">3</span>%) registros de procedimentos obstétricos.</span>
<span id="cb9-33"><a href="#cb9-33" tabindex="-1"></a>Excluídos <span class="dv">164</span> (<span class="dv">0</span>,<span class="dv">2</span>%) registros de AIH de longa permanência.</span>
<span id="cb9-34"><a href="#cb9-34" tabindex="-1"></a>Exportados <span class="fl">63.291</span> (<span class="dv">83</span>,<span class="dv">5</span>%) registros.</span>
<span id="cb9-35"><a href="#cb9-35" tabindex="-1"></a><span class="fu">nrow</span>(c)</span>
<span id="cb9-36"><a href="#cb9-36" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">63291</span></span>
<span id="cb9-37"><a href="#cb9-37" tabindex="-1"></a><span class="fu">summary</span>(c<span class="sc">$</span>data.inter)</span>
<span id="cb9-38"><a href="#cb9-38" tabindex="-1"></a>        Min.      <span class="dv">1</span>st Qu.       Median         Mean      <span class="dv">3</span>rd Qu.         Max. </span>
<span id="cb9-39"><a href="#cb9-39" tabindex="-1"></a><span class="st">"2018-01-01"</span> <span class="st">"2018-01-11"</span> <span class="st">"2018-01-23"</span> <span class="st">"2018-01-24"</span> <span class="st">"2018-02-05"</span> <span class="st">"2018-02-28"</span> </span></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Limpar o ambiente de trabalho, renomear um dos bancos de dados:</span></span>
<span><span class="va">csap</span> <span class="op">&lt;-</span> <span class="va">csap.ftp</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rm.html" class="external-link">rm</a></span><span class="op">(</span><span class="va">csap.csv</span>, <span class="va">csap.dbc</span>, <span class="va">csap.dbf</span>, <span class="va">csap.ftp</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="em-um-banco-de-dados-existente-na-sessão-de-trabalho">Em um banco de dados existente na sessão de trabalho<a class="anchor" aria-label="anchor" href="#em-um-banco-de-dados-existente-na-sess%C3%A3o-de-trabalho"></a>
</h3>
<div class="section level4">
<h4 id="com-a-estrutura-dos-arquivos-da-aih">Com a estrutura dos arquivos da AIH<a class="anchor" aria-label="anchor" href="#com-a-estrutura-dos-arquivos-da-aih"></a>
</h4>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="fu">read.csv</span>(<span class="st">"data-raw/RDRS1801.csv"</span>) <span class="sc">|&gt;</span> <span class="co"># criar o data.frame</span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>  <span class="fu">csapAIH</span>() <span class="sc">|&gt;</span></span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a>Importados <span class="fl">60.529</span> registros.</span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a>Excluídos <span class="fl">5.044</span> (<span class="dv">8</span>,<span class="dv">3</span>%) registros de procedimentos obstétricos.</span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a>Excluídos <span class="dv">366</span> (<span class="dv">0</span>,<span class="dv">6</span>%) registros de AIH de longa permanência.</span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a>Exportados <span class="fl">55.119</span> (<span class="dv">91</span>,<span class="dv">1</span>%) registros.</span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a>Rows<span class="sc">:</span> <span class="dv">55</span>,<span class="dv">119</span></span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a>Columns<span class="sc">:</span> <span class="dv">16</span></span>
<span id="cb11-10"><a href="#cb11-10" tabindex="-1"></a><span class="sc">$</span> n.aih      <span class="sc">&lt;</span>chr<span class="sc">&gt;</span> <span class="st">"4318100063695"</span>, <span class="st">"4318100349508"</span>, <span class="st">"4318100349563"</span>, <span class="st">"4318100…</span></span>
<span id="cb11-11"><a href="#cb11-11" tabindex="-1"></a><span class="st">$ munres     &lt;int&gt; 431340, 430450, 430450, 430450, 430450, 430450, 430450, 430…</span></span>
<span id="cb11-12"><a href="#cb11-12" tabindex="-1"></a><span class="st">$ munint     &lt;int&gt; 431080, 430450, 430450, 430450, 430450, 430450, 430450, 430…</span></span>
<span id="cb11-13"><a href="#cb11-13" tabindex="-1"></a><span class="st">$ sexo       &lt;fct&gt; masc, fem, fem, fem, masc, masc, masc, masc, fem, masc, fem…</span></span>
<span id="cb11-14"><a href="#cb11-14" tabindex="-1"></a><span class="st">$ nasc       &lt;date&gt; 55633-04-16, 56511-08-19, 56537-12-10, 56292-01-04, 55005-…</span></span>
<span id="cb11-15"><a href="#cb11-15" tabindex="-1"></a><span class="st">$ idade      &lt;dbl&gt; 58, 25, 24, 33, 80, 69, 50, 58, 70, 69, 88, 61, 26, 42, 67,…</span></span>
<span id="cb11-16"><a href="#cb11-16" tabindex="-1"></a><span class="st">$ fxetar.det &lt;fct&gt; 55-59, 25-29, 20-24, 30-34, 80 e +, 65-69, 50-54, 55-59, 70…</span></span>
<span id="cb11-17"><a href="#cb11-17" tabindex="-1"></a><span class="st">$ fxetar5    &lt;fct&gt; 55-59, 25-29, 20-24, 30-34, 80 e +, 65-69, 50-54, 55-59, 70…</span></span>
<span id="cb11-18"><a href="#cb11-18" tabindex="-1"></a><span class="st">$ csap       &lt;chr&gt; "</span>não<span class="st">", "</span>não<span class="st">", "</span>não<span class="st">", "</span>não<span class="st">", "</span>sim<span class="st">", "</span>sim<span class="st">", "</span>não<span class="st">", "</span>não<span class="st">", "</span>si…</span>
<span id="cb11-19"><a href="#cb11-19" tabindex="-1"></a><span class="sc">$</span> grupo      <span class="sc">&lt;</span>fct<span class="sc">&gt;</span> no<span class="sc">-</span>CSAP, no<span class="sc">-</span>CSAP, no<span class="sc">-</span>CSAP, no<span class="sc">-</span>CSAP, g12, g03, no<span class="sc">-</span>CSAP, no<span class="sc">-</span>C…</span>
<span id="cb11-20"><a href="#cb11-20" tabindex="-1"></a><span class="sc">$</span> cid        <span class="sc">&lt;</span>chr<span class="sc">&gt;</span> <span class="st">"K439"</span>, <span class="st">"O628"</span>, <span class="st">"O641"</span>, <span class="st">"O623"</span>, <span class="st">"I64"</span>, <span class="st">"D500"</span>, <span class="st">"I408"</span>, <span class="st">"T63…</span></span>
<span id="cb11-21"><a href="#cb11-21" tabindex="-1"></a><span class="st">$ proc.rea   &lt;int&gt; 407040064, 411010034, 411010034, 303100044, 303040149, 3030…</span></span>
<span id="cb11-22"><a href="#cb11-22" tabindex="-1"></a><span class="st">$ data.inter &lt;date&gt; 57221-04-11, 57221-03-29, 57221-04-08, 57221-04-08, 57221-…</span></span>
<span id="cb11-23"><a href="#cb11-23" tabindex="-1"></a><span class="st">$ data.saida &lt;date&gt; 57221-04-13, 57221-03-31, 57221-04-10, 57221-04-09, 57221-…</span></span>
<span id="cb11-24"><a href="#cb11-24" tabindex="-1"></a><span class="st">$ cep        &lt;int&gt; 93544360, 96600000, 96600000, 96600000, 96600000, 96600000,…</span></span>
<span id="cb11-25"><a href="#cb11-25" tabindex="-1"></a><span class="st">$ cnes       &lt;int&gt; 2232189, 2232928, 2232928, 2232928, 2232928, 2232928, 22329…</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="sem-o-padrão-dos-arquivos-da-aih">Sem o padrão dos arquivos da AIH<a class="anchor" aria-label="anchor" href="#sem-o-padr%C3%A3o-dos-arquivos-da-aih"></a>
</h4>
<p>Mude o argumento <code>sihsus</code> para <code>FALSE</code> e indique no argumento <code>cid</code> qual variável contém os códigos diagnósticos. As variáveis <code>csap</code> e <code>grupo</code> (se <code>csapAIH(..., grupos = TRUE, ...)</code>) são acrescentadas ao final do banco de dados alvo da função.</p>
<div class="section level5">
<h5 id="a-encuesta-de-egresos-hospitalarios-do-equador">A <em>Encuesta de Egresos Hospitalarios</em> do Equador.<a class="anchor" aria-label="anchor" href="#a-encuesta-de-egresos-hospitalarios-do-equador"></a>
</h5>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="fu">data</span>(<span class="st">"eeh20"</span>) <span class="co"># Amostra da "Encuesta de egresos hospitalarios" do Equador, ano 2020</span></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="fu">names</span>(eeh20) <span class="co"># Os nomes das variáveis</span></span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a> [<span class="dv">1</span>] <span class="st">"prov_ubi"</span>   <span class="st">"cant_ubi"</span>   <span class="st">"parr_ubi"</span>   <span class="st">"area_ubi"</span>   <span class="st">"clase"</span>     </span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a> [<span class="dv">6</span>] <span class="st">"tipo"</span>       <span class="st">"entidad"</span>    <span class="st">"sector"</span>     <span class="st">"mes_inv"</span>    <span class="st">"nac_pac"</span>   </span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a>[<span class="dv">11</span>] <span class="st">"cod_pais"</span>   <span class="st">"nom_pais"</span>   <span class="st">"sexo"</span>       <span class="st">"cod_edad"</span>   <span class="st">"edad"</span>      </span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a>[<span class="dv">16</span>] <span class="st">"etnia"</span>      <span class="st">"prov_res"</span>   <span class="st">"area_res"</span>   <span class="st">"anio_ingr"</span>  <span class="st">"mes_ingr"</span>  </span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a>[<span class="dv">21</span>] <span class="st">"dia_ingr"</span>   <span class="st">"fecha_ingr"</span> <span class="st">"anio_egr"</span>   <span class="st">"mes_egr"</span>    <span class="st">"dia_egr"</span>   </span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a>[<span class="dv">26</span>] <span class="st">"fecha_egr"</span>  <span class="st">"dia_estad"</span>  <span class="st">"con_egrpa"</span>  <span class="st">"esp_egrpa"</span>  <span class="st">"cau_cie10"</span> </span>
<span id="cb12-9"><a href="#cb12-9" tabindex="-1"></a>[<span class="dv">31</span>] <span class="st">"cant_res"</span>   <span class="st">"parr_res"</span>   <span class="st">"causa3"</span>     <span class="st">"cap221rx"</span>   <span class="st">"cau221rx"</span>  </span>
<span id="cb12-10"><a href="#cb12-10" tabindex="-1"></a>[<span class="dv">36</span>] <span class="st">"cau298rx"</span>  </span></code></pre></div>
<p>A variável <code>cau_cie10</code> (posição 30) tem o código do diagnóstico de internação. A função csapAIH acrescenta à base duas (se <code>grupo == TRUE</code>) variáveis, <code>csap</code> e <code>grupo</code>, dispostas nas últimas colunas (posição e respectivamente.)</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a>csap.eeh20 <span class="ot">&lt;-</span> <span class="fu">csapAIH</span>(eeh20, <span class="at">sihsus =</span> <span class="cn">FALSE</span>, <span class="at">cid =</span> cau_cie10)</span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a>Importados <span class="fl">1.000</span> registros.</span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a>Excluídos <span class="dv">150</span> registros de <span class="fu">parto</span> (<span class="dv">15</span>% do total).</span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a><span class="fu">names</span>(csap.eeh20)</span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a> [<span class="dv">1</span>] <span class="st">"prov_ubi"</span>   <span class="st">"cant_ubi"</span>   <span class="st">"parr_ubi"</span>   <span class="st">"area_ubi"</span>   <span class="st">"clase"</span>     </span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a> [<span class="dv">6</span>] <span class="st">"tipo"</span>       <span class="st">"entidad"</span>    <span class="st">"sector"</span>     <span class="st">"mes_inv"</span>    <span class="st">"nac_pac"</span>   </span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a>[<span class="dv">11</span>] <span class="st">"cod_pais"</span>   <span class="st">"nom_pais"</span>   <span class="st">"sexo"</span>       <span class="st">"cod_edad"</span>   <span class="st">"edad"</span>      </span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a>[<span class="dv">16</span>] <span class="st">"etnia"</span>      <span class="st">"prov_res"</span>   <span class="st">"area_res"</span>   <span class="st">"anio_ingr"</span>  <span class="st">"mes_ingr"</span>  </span>
<span id="cb13-9"><a href="#cb13-9" tabindex="-1"></a>[<span class="dv">21</span>] <span class="st">"dia_ingr"</span>   <span class="st">"fecha_ingr"</span> <span class="st">"anio_egr"</span>   <span class="st">"mes_egr"</span>    <span class="st">"dia_egr"</span>   </span>
<span id="cb13-10"><a href="#cb13-10" tabindex="-1"></a>[<span class="dv">26</span>] <span class="st">"fecha_egr"</span>  <span class="st">"dia_estad"</span>  <span class="st">"con_egrpa"</span>  <span class="st">"esp_egrpa"</span>  <span class="st">"cau_cie10"</span> </span>
<span id="cb13-11"><a href="#cb13-11" tabindex="-1"></a>[<span class="dv">31</span>] <span class="st">"cant_res"</span>   <span class="st">"parr_res"</span>   <span class="st">"causa3"</span>     <span class="st">"cap221rx"</span>   <span class="st">"cau221rx"</span>  </span>
<span id="cb13-12"><a href="#cb13-12" tabindex="-1"></a>[<span class="dv">36</span>] <span class="st">"cau298rx"</span>   <span class="st">"csap"</span>       <span class="st">"grupo"</span>     </span>
<span id="cb13-13"><a href="#cb13-13" tabindex="-1"></a>csap.eeh20[<span class="fu">c</span>(<span class="dv">30</span>,<span class="dv">37</span><span class="sc">:</span><span class="dv">38</span>)] <span class="sc">|&gt;</span> </span>
<span id="cb13-14"><a href="#cb13-14" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">3</span>) </span>
<span id="cb13-15"><a href="#cb13-15" tabindex="-1"></a>  cau_cie10 csap   grupo</span>
<span id="cb13-16"><a href="#cb13-16" tabindex="-1"></a><span class="dv">1</span>      C169  não no<span class="sc">-</span>CSAP</span>
<span id="cb13-17"><a href="#cb13-17" tabindex="-1"></a><span class="dv">2</span>      U072  não no<span class="sc">-</span>CSAP</span>
<span id="cb13-18"><a href="#cb13-18" tabindex="-1"></a><span class="dv">3</span>      A090  sim     g02</span></code></pre></div>
</div>
<div class="section level5">
<h5 id="a-declaração-de-óbito-do-do-sim">A Declaração de Óbito (DO) do SIM<a class="anchor" aria-label="anchor" href="#a-declara%C3%A7%C3%A3o-de-%C3%B3bito-do-do-sim"></a>
</h5>
<p>A variável <code>CAUSABAS</code> tem o código da causa básica do óbito.</p>
<p>De modo semelhante à AIH, as bases de dados da DO também têm a idade codificada e não a verdadeira idade da pessoa. Por exemplo, a variável <code>IDADE</code> em <code>DORS2021</code> é um <code>factor</code> com 0 níveis, em que o primeiro é e o último é . Neste caso podemos usar a função <code>idadeSUS</code> para computar a idade, mas como o resultado de <code>idadeSUS</code> é “um objeto da classe data frame com três variáveis” (v. <code><a href="reference/idadeSUS.html">?idadeSUS</a></code>), necessitamos a função <code>unnest</code> (de <code>tidyr</code>) para desagrupar as variáveis antes de inseri-las em <code>DORS2021</code>. Além disso, foi excluída (com <code>unnest(...)[-2]</code>) a “faixa etária detalhada”, que é a segunda variável no output de <code>idadeSUS</code>.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a>DORS2021 <span class="ot">&lt;-</span> DORS2021 <span class="sc">%&gt;%</span></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a>  <span class="fu">csapAIH</span>(<span class="at">sihsus =</span> <span class="cn">FALSE</span>, <span class="at">cid =</span> CAUSABAS, <span class="at">parto.rm =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a>  <span class="fu">mutate</span>(tidyr<span class="sc">::</span><span class="fu">unnest</span>(<span class="fu">idadeSUS</span>(DORS2021, <span class="at">sis =</span> <span class="st">"SIM"</span>), <span class="at">cols =</span> <span class="fu">c</span>())[<span class="sc">-</span><span class="dv">2</span>],</span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a>         <span class="at">fxetar3 =</span> <span class="fu">fxetar3g</span>(idade),</span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a>         <span class="at">SEXO =</span> <span class="fu">factor</span>(SEXO, <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"masc"</span>, <span class="st">"fem"</span>)))</span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a>Importados <span class="fl">117.722</span> registros.</span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a>DORS2021[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, (<span class="fu">ncol</span>(DORS2021)<span class="sc">-</span><span class="dv">5</span>)<span class="sc">:</span><span class="fu">ncol</span>(DORS2021)]</span>
<span id="cb14-8"><a href="#cb14-8" tabindex="-1"></a>  CONTADOR csap   grupo idade fxetar5 fxetar3</span>
<span id="cb14-9"><a href="#cb14-9" tabindex="-1"></a><span class="dv">1</span>        <span class="dv">1</span>  não no<span class="sc">-</span>CSAP    <span class="dv">49</span>   <span class="dv">45-49</span>   <span class="dv">15-59</span></span>
<span id="cb14-10"><a href="#cb14-10" tabindex="-1"></a><span class="dv">2</span>        <span class="dv">2</span>  não no<span class="sc">-</span>CSAP    <span class="dv">41</span>   <span class="dv">40-44</span>   <span class="dv">15-59</span></span>
<span id="cb14-11"><a href="#cb14-11" tabindex="-1"></a><span class="dv">3</span>        <span class="dv">3</span>  não no<span class="sc">-</span>CSAP    <span class="dv">78</span>   <span class="dv">75-79</span>    <span class="dv">60</span>e<span class="sc">+</span></span></code></pre></div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="a-partir-de-uma-variável-com-códigos-da-cid-10">A partir de uma variável com códigos da CID-10:<a class="anchor" aria-label="anchor" href="#a-partir-de-uma-vari%C3%A1vel-com-c%C3%B3digos-da-cid-10"></a>
</h3>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a>cids <span class="ot">&lt;-</span> aih100<span class="sc">$</span>DIAG_PRINC[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>]</span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a>cids</span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a> [<span class="dv">1</span>] N189 O689 S423 H938 P584 I200 I442 C189 C409 K818</span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a><span class="dv">3254</span> Levels<span class="sc">:</span> A009 A020 A044 A045 A048 A049 A050 A058 A059 A061 A069 A071 ... Z990</span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a><span class="fu">csapAIH</span>(cids) </span>
<span id="cb15-6"><a href="#cb15-6" tabindex="-1"></a>Excluídos <span class="dv">0</span> registros de <span class="fu">parto</span> (<span class="dv">0</span>% do total).</span>
<span id="cb15-7"><a href="#cb15-7" tabindex="-1"></a>    cid csap   grupo</span>
<span id="cb15-8"><a href="#cb15-8" tabindex="-1"></a><span class="dv">1</span>  N189  não no<span class="sc">-</span>CSAP</span>
<span id="cb15-9"><a href="#cb15-9" tabindex="-1"></a><span class="dv">2</span>  O689  não no<span class="sc">-</span>CSAP</span>
<span id="cb15-10"><a href="#cb15-10" tabindex="-1"></a><span class="dv">3</span>  S423  não no<span class="sc">-</span>CSAP</span>
<span id="cb15-11"><a href="#cb15-11" tabindex="-1"></a><span class="dv">4</span>  H938  não no<span class="sc">-</span>CSAP</span>
<span id="cb15-12"><a href="#cb15-12" tabindex="-1"></a><span class="dv">5</span>  P584  não no<span class="sc">-</span>CSAP</span>
<span id="cb15-13"><a href="#cb15-13" tabindex="-1"></a><span class="dv">6</span>  I200  sim     g10</span>
<span id="cb15-14"><a href="#cb15-14" tabindex="-1"></a><span class="dv">7</span>  I442  não no<span class="sc">-</span>CSAP</span>
<span id="cb15-15"><a href="#cb15-15" tabindex="-1"></a><span class="dv">8</span>  C189  não no<span class="sc">-</span>CSAP</span>
<span id="cb15-16"><a href="#cb15-16" tabindex="-1"></a><span class="dv">9</span>  C409  não no<span class="sc">-</span>CSAP</span>
<span id="cb15-17"><a href="#cb15-17" tabindex="-1"></a><span class="dv">10</span> K818  não no<span class="sc">-</span>CSAP</span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="apresentação-de-resultados">Apresentação de resultados<a class="anchor" aria-label="anchor" href="#apresenta%C3%A7%C3%A3o-de-resultados"></a>
</h2>
<div class="section level3">
<h3 id="resumo-de-importação-de-dados">Resumo de importação de dados<a class="anchor" aria-label="anchor" href="#resumo-de-importa%C3%A7%C3%A3o-de-dados"></a>
</h3>
<p>Um resumo de importação, apresentado durante a realização do trabalho, é guardado como atributo do banco de dados e pode ser recuperado com as funções <code><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr()</a></code> ou <code><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes()</a></code>:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="fu">attr</span>(csap, <span class="st">"resumo"</span>)</span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a>          acao  freq  perc                                  objeto</span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a><span class="dv">1</span>   Importados <span class="dv">60529</span> <span class="fl">100.0</span>                              registros.</span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a><span class="dv">2</span> Excluídos \t  <span class="dv">8240</span>  <span class="fl">13.6</span> registros de procedimentos obstétricos.</span>
<span id="cb16-5"><a href="#cb16-5" tabindex="-1"></a><span class="dv">3</span> Excluídos \t   <span class="dv">366</span>   <span class="fl">0.6</span>  registros de AIH de longa permanência.</span>
<span id="cb16-6"><a href="#cb16-6" tabindex="-1"></a><span class="dv">4</span>   Exportados <span class="dv">51923</span>  <span class="fl">85.8</span>                              registros.</span>
<span id="cb16-7"><a href="#cb16-7" tabindex="-1"></a><span class="co"># attributes(csap)$resumo</span></span></code></pre></div>
<p>Em tabela para apresentação:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">csap</span><span class="op">)</span><span class="op">$</span><span class="va">resumo</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span>format.args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>big.mark <span class="op">=</span> <span class="st">"."</span>, decimal.mark <span class="op">=</span> <span class="st">","</span><span class="op">)</span>, </span>
<span>               col.names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Ação"</span>, <span class="st">"N"</span>, <span class="st">"%"</span>, <span class="st">"Objeto"</span><span class="op">)</span> <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/warning.html" class="external-link">suppressWarnings</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="17%">
<col width="11%">
<col width="10%">
<col width="60%">
</colgroup>
<thead><tr class="header">
<th align="left">Ação</th>
<th align="right">N</th>
<th align="right">%</th>
<th align="left">Objeto</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Importados</td>
<td align="right">60.529</td>
<td align="right">100,0</td>
<td align="left">registros.</td>
</tr>
<tr class="even">
<td align="left">Excluídos</td>
<td align="right">8.240</td>
<td align="right">13,6</td>
<td align="left">registros de procedimentos obstétricos.</td>
</tr>
<tr class="odd">
<td align="left">Excluídos</td>
<td align="right">366</td>
<td align="right">0,6</td>
<td align="left">registros de AIH de longa permanência.</td>
</tr>
<tr class="even">
<td align="left">Exportados</td>
<td align="right">51.923</td>
<td align="right">85,8</td>
<td align="left">registros.</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="tabela-bruta">Tabela “bruta”<a class="anchor" aria-label="anchor" href="#tabela-bruta"></a>
</h3>
<p>A função <code>descreveCSAP</code> gera, a partir de um comando muito simples, uma tabela pronta para apresentação, com as frequências brutas e absolutas das CSAP por grupo de causa.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="fu">descreveCSAP</span>(csap)</span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a>                                   Grupo  Casos <span class="sc">%Total %</span>CSAP</span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a><span class="dv">1</span>   <span class="fl">1.</span> Prev. vacinação e cond. evitáveis    <span class="dv">116</span>   <span class="dv">0</span>,<span class="dv">22</span>  <span class="dv">1</span>,<span class="dv">07</span></span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a><span class="dv">2</span>                     <span class="fl">2.</span> Gastroenterites    <span class="dv">802</span>   <span class="dv">1</span>,<span class="dv">54</span>  <span class="dv">7</span>,<span class="dv">38</span></span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a><span class="dv">3</span>                              <span class="fl">3.</span> Anemia     <span class="dv">73</span>   <span class="dv">0</span>,<span class="dv">14</span>  <span class="dv">0</span>,<span class="dv">67</span></span>
<span id="cb18-6"><a href="#cb18-6" tabindex="-1"></a><span class="dv">4</span>                 <span class="fl">4.</span> Defic. nutricionais    <span class="dv">241</span>   <span class="dv">0</span>,<span class="dv">46</span>  <span class="dv">2</span>,<span class="dv">22</span></span>
<span id="cb18-7"><a href="#cb18-7" tabindex="-1"></a><span class="dv">5</span>     <span class="fl">5.</span> Infec. ouvido, nariz e garganta    <span class="dv">168</span>   <span class="dv">0</span>,<span class="dv">32</span>  <span class="dv">1</span>,<span class="dv">55</span></span>
<span id="cb18-8"><a href="#cb18-8" tabindex="-1"></a><span class="dv">6</span>              <span class="fl">6.</span> Pneumonias bacterianas    <span class="dv">653</span>   <span class="dv">1</span>,<span class="dv">26</span>  <span class="dv">6</span>,<span class="dv">01</span></span>
<span id="cb18-9"><a href="#cb18-9" tabindex="-1"></a><span class="dv">7</span>                                <span class="fl">7.</span> Asma    <span class="dv">234</span>   <span class="dv">0</span>,<span class="dv">45</span>  <span class="dv">2</span>,<span class="dv">15</span></span>
<span id="cb18-10"><a href="#cb18-10" tabindex="-1"></a><span class="dv">8</span>                   <span class="fl">8.</span> <span class="fu">Pulmonares</span> (DPOC)  <span class="fl">1.213</span>   <span class="dv">2</span>,<span class="dv">34</span> <span class="dv">11</span>,<span class="dv">17</span></span>
<span id="cb18-11"><a href="#cb18-11" tabindex="-1"></a><span class="dv">9</span>                         <span class="fl">9.</span> Hipertensão    <span class="dv">147</span>   <span class="dv">0</span>,<span class="dv">28</span>  <span class="dv">1</span>,<span class="dv">35</span></span>
<span id="cb18-12"><a href="#cb18-12" tabindex="-1"></a><span class="dv">10</span>                            <span class="fl">10.</span> Angina  <span class="fl">1.005</span>   <span class="dv">1</span>,<span class="dv">94</span>  <span class="dv">9</span>,<span class="dv">25</span></span>
<span id="cb18-13"><a href="#cb18-13" tabindex="-1"></a><span class="dv">11</span>                   <span class="fl">11.</span> Insuf. cardíaca  <span class="fl">1.394</span>   <span class="dv">2</span>,<span class="dv">68</span> <span class="dv">12</span>,<span class="dv">83</span></span>
<span id="cb18-14"><a href="#cb18-14" tabindex="-1"></a><span class="dv">12</span>                 <span class="fl">12.</span> Cerebrovasculares  <span class="fl">1.373</span>   <span class="dv">2</span>,<span class="dv">64</span> <span class="dv">12</span>,<span class="dv">64</span></span>
<span id="cb18-15"><a href="#cb18-15" tabindex="-1"></a><span class="dv">13</span>                 <span class="fl">13.</span> Diabetes mellitus    <span class="dv">743</span>   <span class="dv">1</span>,<span class="dv">43</span>  <span class="dv">6</span>,<span class="dv">84</span></span>
<span id="cb18-16"><a href="#cb18-16" tabindex="-1"></a><span class="dv">14</span>                        <span class="fl">14.</span> Epilepsias    <span class="dv">331</span>   <span class="dv">0</span>,<span class="dv">64</span>  <span class="dv">3</span>,<span class="dv">05</span></span>
<span id="cb18-17"><a href="#cb18-17" tabindex="-1"></a><span class="dv">15</span>                   <span class="fl">15.</span> Infec. urinária  <span class="fl">1.360</span>   <span class="dv">2</span>,<span class="dv">62</span> <span class="dv">12</span>,<span class="dv">52</span></span>
<span id="cb18-18"><a href="#cb18-18" tabindex="-1"></a><span class="dv">16</span>          <span class="fl">16.</span> Infec. pele e subcutâneo    <span class="dv">459</span>   <span class="dv">0</span>,<span class="dv">88</span>  <span class="dv">4</span>,<span class="dv">23</span></span>
<span id="cb18-19"><a href="#cb18-19" tabindex="-1"></a><span class="dv">17</span>     <span class="fl">17.</span> D. infl. órgãos pélvicos fem.    <span class="dv">133</span>   <span class="dv">0</span>,<span class="dv">26</span>  <span class="dv">1</span>,<span class="dv">22</span></span>
<span id="cb18-20"><a href="#cb18-20" tabindex="-1"></a><span class="dv">18</span>           <span class="fl">18.</span> Úlcera gastrointestinal    <span class="dv">195</span>   <span class="dv">0</span>,<span class="dv">38</span>  <span class="dv">1</span>,<span class="dv">80</span></span>
<span id="cb18-21"><a href="#cb18-21" tabindex="-1"></a><span class="dv">19</span>                 <span class="fl">19.</span> Pré<span class="sc">-</span>natal e parto    <span class="dv">222</span>   <span class="dv">0</span>,<span class="dv">43</span>  <span class="dv">2</span>,<span class="dv">04</span></span>
<span id="cb18-22"><a href="#cb18-22" tabindex="-1"></a><span class="dv">20</span>                            Total CSAP <span class="fl">10.862</span>  <span class="dv">20</span>,<span class="dv">92</span>   <span class="dv">100</span></span>
<span id="cb18-23"><a href="#cb18-23" tabindex="-1"></a><span class="dv">21</span>                               no<span class="sc">-</span>CSAP <span class="fl">41.061</span>  <span class="dv">79</span>,<span class="dv">08</span>    <span class="sc">--</span></span>
<span id="cb18-24"><a href="#cb18-24" tabindex="-1"></a><span class="dv">22</span>                  Total de internações <span class="fl">51.923</span>    <span class="dv">100</span>    <span class="sc">--</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="tabela-para-apresentação">Tabela para apresentação<a class="anchor" aria-label="anchor" href="#tabela-para-apresenta%C3%A7%C3%A3o"></a>
</h3>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/descreveCSAP.html">descreveCSAP</a></span><span class="op">(</span><span class="va">csap</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span>align <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'l'</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">'r'</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">Grupo</th>
<th align="right">Casos</th>
<th align="right">%Total</th>
<th align="right">%CSAP</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">1. Prev. vacinação e cond. evitáveis</td>
<td align="right">116</td>
<td align="right">0,22</td>
<td align="right">1,07</td>
</tr>
<tr class="even">
<td align="left">2. Gastroenterites</td>
<td align="right">802</td>
<td align="right">1,54</td>
<td align="right">7,38</td>
</tr>
<tr class="odd">
<td align="left">3. Anemia</td>
<td align="right">73</td>
<td align="right">0,14</td>
<td align="right">0,67</td>
</tr>
<tr class="even">
<td align="left">4. Defic. nutricionais</td>
<td align="right">241</td>
<td align="right">0,46</td>
<td align="right">2,22</td>
</tr>
<tr class="odd">
<td align="left">5. Infec. ouvido, nariz e garganta</td>
<td align="right">168</td>
<td align="right">0,32</td>
<td align="right">1,55</td>
</tr>
<tr class="even">
<td align="left">6. Pneumonias bacterianas</td>
<td align="right">653</td>
<td align="right">1,26</td>
<td align="right">6,01</td>
</tr>
<tr class="odd">
<td align="left">7. Asma</td>
<td align="right">234</td>
<td align="right">0,45</td>
<td align="right">2,15</td>
</tr>
<tr class="even">
<td align="left">8. Pulmonares (DPOC)</td>
<td align="right">1.213</td>
<td align="right">2,34</td>
<td align="right">11,17</td>
</tr>
<tr class="odd">
<td align="left">9. Hipertensão</td>
<td align="right">147</td>
<td align="right">0,28</td>
<td align="right">1,35</td>
</tr>
<tr class="even">
<td align="left">10. Angina</td>
<td align="right">1.005</td>
<td align="right">1,94</td>
<td align="right">9,25</td>
</tr>
<tr class="odd">
<td align="left">11. Insuf. cardíaca</td>
<td align="right">1.394</td>
<td align="right">2,68</td>
<td align="right">12,83</td>
</tr>
<tr class="even">
<td align="left">12. Cerebrovasculares</td>
<td align="right">1.373</td>
<td align="right">2,64</td>
<td align="right">12,64</td>
</tr>
<tr class="odd">
<td align="left">13. Diabetes mellitus</td>
<td align="right">743</td>
<td align="right">1,43</td>
<td align="right">6,84</td>
</tr>
<tr class="even">
<td align="left">14. Epilepsias</td>
<td align="right">331</td>
<td align="right">0,64</td>
<td align="right">3,05</td>
</tr>
<tr class="odd">
<td align="left">15. Infec. urinária</td>
<td align="right">1.360</td>
<td align="right">2,62</td>
<td align="right">12,52</td>
</tr>
<tr class="even">
<td align="left">16. Infec. pele e subcutâneo</td>
<td align="right">459</td>
<td align="right">0,88</td>
<td align="right">4,23</td>
</tr>
<tr class="odd">
<td align="left">17. D. infl. órgãos pélvicos fem.</td>
<td align="right">133</td>
<td align="right">0,26</td>
<td align="right">1,22</td>
</tr>
<tr class="even">
<td align="left">18. Úlcera gastrointestinal</td>
<td align="right">195</td>
<td align="right">0,38</td>
<td align="right">1,80</td>
</tr>
<tr class="odd">
<td align="left">19. Pré-natal e parto</td>
<td align="right">222</td>
<td align="right">0,43</td>
<td align="right">2,04</td>
</tr>
<tr class="even">
<td align="left">Total CSAP</td>
<td align="right">10.862</td>
<td align="right">20,92</td>
<td align="right">100</td>
</tr>
<tr class="odd">
<td align="left">no-CSAP</td>
<td align="right">41.061</td>
<td align="right">79,08</td>
<td align="right">–</td>
</tr>
<tr class="even">
<td align="left">Total de internações</td>
<td align="right">51.923</td>
<td align="right">100</td>
<td align="right">–</td>
</tr>
</tbody>
</table>
<p>Entretanto, ao transformar os valores para o formato latino, sua classe se transforma em <code>character</code> e assim é impossível realizar cálculos com esse output. Além disso, não serve para publicações em inglês. Por isso a função <code>descreveCSAP</code> permanecerá no pacote mas seu desenvolvimento seguirá em outra função, agora de nome <code>tabCSAP</code>. Nessa nova função, a apresentação de uma tabela formatada se faz a partir do argumento <code>format = TRUE</code>. Por padrão esse argumento é <code>FALSE</code>, o que permite operações matemáticas com os valores da tabela (um <code>data.frame</code>, na verdade), como veremos em seguida.</p>
<p>A função <code>tabCSAP</code> permite também a apresentação da tabela em inglês ou espanhol, através do argumento <code>lang</code>:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/tabCSAP.html">tabCSAP</a></span><span class="op">(</span><span class="va">csap</span><span class="op">$</span><span class="va">grupo</span>, digits <span class="op">=</span> <span class="fl">1</span>, lang <span class="op">=</span> <span class="st">"en"</span>, format <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span>align <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'l'</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">'r'</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">Group</th>
<th align="right">Cases</th>
<th align="right">Total %</th>
<th align="right">ACSC %</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">1. Vaccine prev. and amenable cond.</td>
<td align="right">116</td>
<td align="right">0.2</td>
<td align="right">1.1</td>
</tr>
<tr class="even">
<td align="left">2. Gastroenteritis</td>
<td align="right">802</td>
<td align="right">1.5</td>
<td align="right">7.4</td>
</tr>
<tr class="odd">
<td align="left">3. Anemia</td>
<td align="right">73</td>
<td align="right">0.1</td>
<td align="right">0.7</td>
</tr>
<tr class="even">
<td align="left">4. Nutritional deficiency</td>
<td align="right">241</td>
<td align="right">0.5</td>
<td align="right">2.2</td>
</tr>
<tr class="odd">
<td align="left">5. Ear, nose and throat infec.</td>
<td align="right">168</td>
<td align="right">0.3</td>
<td align="right">1.5</td>
</tr>
<tr class="even">
<td align="left">6. Bacterial pneumonia</td>
<td align="right">653</td>
<td align="right">1.3</td>
<td align="right">6.0</td>
</tr>
<tr class="odd">
<td align="left">7. Asthma</td>
<td align="right">234</td>
<td align="right">0.5</td>
<td align="right">2.2</td>
</tr>
<tr class="even">
<td align="left">8. Pulmonary (COPD)</td>
<td align="right">1,213</td>
<td align="right">2.3</td>
<td align="right">11.2</td>
</tr>
<tr class="odd">
<td align="left">9. Hypertension</td>
<td align="right">147</td>
<td align="right">0.3</td>
<td align="right">1.4</td>
</tr>
<tr class="even">
<td align="left">10. Angina</td>
<td align="right">1,005</td>
<td align="right">1.9</td>
<td align="right">9.3</td>
</tr>
<tr class="odd">
<td align="left">11. Heart failure</td>
<td align="right">1,394</td>
<td align="right">2.7</td>
<td align="right">12.8</td>
</tr>
<tr class="even">
<td align="left">12. Cerebrovascular</td>
<td align="right">1,373</td>
<td align="right">2.6</td>
<td align="right">12.6</td>
</tr>
<tr class="odd">
<td align="left">13. Diabetes mellitus</td>
<td align="right">743</td>
<td align="right">1.4</td>
<td align="right">6.8</td>
</tr>
<tr class="even">
<td align="left">14. Convulsions and epilepsy</td>
<td align="right">331</td>
<td align="right">0.6</td>
<td align="right">3.0</td>
</tr>
<tr class="odd">
<td align="left">15. Urinary infection</td>
<td align="right">1,360</td>
<td align="right">2.6</td>
<td align="right">12.5</td>
</tr>
<tr class="even">
<td align="left">16. Skin and subcutaneous infec.</td>
<td align="right">459</td>
<td align="right">0.9</td>
<td align="right">4.2</td>
</tr>
<tr class="odd">
<td align="left">17. Pelvic inflammatory disease</td>
<td align="right">133</td>
<td align="right">0.3</td>
<td align="right">1.2</td>
</tr>
<tr class="even">
<td align="left">18. Gastrointestinal ulcers</td>
<td align="right">195</td>
<td align="right">0.4</td>
<td align="right">1.8</td>
</tr>
<tr class="odd">
<td align="left">19. Pre-natal and childbirth</td>
<td align="right">222</td>
<td align="right">0.4</td>
<td align="right">2.0</td>
</tr>
<tr class="even">
<td align="left">ACSC</td>
<td align="right">10,862</td>
<td align="right">20.9</td>
<td align="right">100</td>
</tr>
<tr class="odd">
<td align="left">Non ACSC</td>
<td align="right">41,061</td>
<td align="right">79.1</td>
<td align="right">–</td>
</tr>
<tr class="even">
<td align="left">TOTAL hospitalizations</td>
<td align="right">51,923</td>
<td align="right">100</td>
<td align="right">–</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="reference/tabCSAP.html">tabCSAP</a></span><span class="op">(</span><span class="va">csap</span><span class="op">$</span><span class="va">grupo</span>, digits <span class="op">=</span> <span class="fl">1</span>, lang <span class="op">=</span> <span class="st">"es"</span>, format <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span>align <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'l'</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">'r'</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="63%">
<col width="11%">
<col width="13%">
<col width="11%">
</colgroup>
<thead><tr class="header">
<th align="left">Grupo</th>
<th align="right">Casos</th>
<th align="right">% Total</th>
<th align="right">% CSAP</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">1. Prev. vacunación y otros medios</td>
<td align="right">116</td>
<td align="right">0,2</td>
<td align="right">1,1</td>
</tr>
<tr class="even">
<td align="left">2. Gastroenteritis</td>
<td align="right">802</td>
<td align="right">1,5</td>
<td align="right">7,4</td>
</tr>
<tr class="odd">
<td align="left">3. Anemia</td>
<td align="right">73</td>
<td align="right">0,1</td>
<td align="right">0,7</td>
</tr>
<tr class="even">
<td align="left">4. Def. nutricionales</td>
<td align="right">241</td>
<td align="right">0,5</td>
<td align="right">2,2</td>
</tr>
<tr class="odd">
<td align="left">5. Infec. oído, nariz y garganta</td>
<td align="right">168</td>
<td align="right">0,3</td>
<td align="right">1,5</td>
</tr>
<tr class="even">
<td align="left">6. Neumonía bacteriana</td>
<td align="right">653</td>
<td align="right">1,3</td>
<td align="right">6,0</td>
</tr>
<tr class="odd">
<td align="left">7. Asma</td>
<td align="right">234</td>
<td align="right">0,5</td>
<td align="right">2,2</td>
</tr>
<tr class="even">
<td align="left">8. Enf. vías respiratorias inferiores</td>
<td align="right">1.213</td>
<td align="right">2,3</td>
<td align="right">11,2</td>
</tr>
<tr class="odd">
<td align="left">9. Hipertensión</td>
<td align="right">147</td>
<td align="right">0,3</td>
<td align="right">1,4</td>
</tr>
<tr class="even">
<td align="left">10. Angina de pecho</td>
<td align="right">1.005</td>
<td align="right">1,9</td>
<td align="right">9,3</td>
</tr>
<tr class="odd">
<td align="left">11. Insuf. cardíaca congestiva</td>
<td align="right">1.394</td>
<td align="right">2,7</td>
<td align="right">12,8</td>
</tr>
<tr class="even">
<td align="left">12. Enf. cerebrovasculares</td>
<td align="right">1.373</td>
<td align="right">2,6</td>
<td align="right">12,6</td>
</tr>
<tr class="odd">
<td align="left">13. Diabetes mellitus</td>
<td align="right">743</td>
<td align="right">1,4</td>
<td align="right">6,8</td>
</tr>
<tr class="even">
<td align="left">14. Epilepsias</td>
<td align="right">331</td>
<td align="right">0,6</td>
<td align="right">3,0</td>
</tr>
<tr class="odd">
<td align="left">15. Infección urinaria</td>
<td align="right">1.360</td>
<td align="right">2,6</td>
<td align="right">12,5</td>
</tr>
<tr class="even">
<td align="left">16. Infec. piel y subcutáneo</td>
<td align="right">459</td>
<td align="right">0,9</td>
<td align="right">4,2</td>
</tr>
<tr class="odd">
<td align="left">17. Enf infl órganos pélvicos femeninos</td>
<td align="right">133</td>
<td align="right">0,3</td>
<td align="right">1,2</td>
</tr>
<tr class="even">
<td align="left">18. Úlcera gastrointestinal</td>
<td align="right">195</td>
<td align="right">0,4</td>
<td align="right">1,8</td>
</tr>
<tr class="odd">
<td align="left">19. Enf. del embarazo, parto y puerperio</td>
<td align="right">222</td>
<td align="right">0,4</td>
<td align="right">2,0</td>
</tr>
<tr class="even">
<td align="left">Total CSAP</td>
<td align="right">10.862</td>
<td align="right">20,9</td>
<td align="right">100</td>
</tr>
<tr class="odd">
<td align="left">No-CSAP</td>
<td align="right">41.061</td>
<td align="right">79,1</td>
<td align="right">–</td>
</tr>
<tr class="even">
<td align="left">Total de ingresos</td>
<td align="right">51.923</td>
<td align="right">100</td>
<td align="right">–</td>
</tr>
</tbody>
</table>
<p>Finalmente, <a href="#lista">vimos</a> que a função <code>tabCSAP</code> permite ainda a apresentação da lista em 20 grupos de causa. Assim, se as CSAP foram classificadas em 20 grupos – usando, por exemplo o argumento <code>lista = "Alfradique"</code> em <code><a href="reference/csapAIH.html">csapAIH()</a></code> –, essa tabela deve ser apresentada com <code>tabCSAP</code> e não com <code>descreveCSAP</code>. Note ainda que, à diferença de <code>descreveCSAP</code>, <code>tabCSAP</code> exige o nome da variável com o grupo de causas.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a>listaOPS <span class="ot">&lt;-</span> <span class="fu">csapAIH</span>(AIHRS2021, <span class="at">lista =</span> <span class="st">"Alfradique"</span>)</span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a>Importados <span class="fl">709.893</span> registros.</span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a>Excluídos <span class="fl">88.345</span> (<span class="dv">12</span>,<span class="dv">4</span>%) registros de procedimentos obstétricos.</span>
<span id="cb22-4"><a href="#cb22-4" tabindex="-1"></a>Excluídos <span class="fl">4.121</span> (<span class="dv">0</span>,<span class="dv">6</span>%) registros de AIH de longa permanência.</span>
<span id="cb22-5"><a href="#cb22-5" tabindex="-1"></a>Exportados <span class="fl">617.427</span> (<span class="dv">87</span>%) registros.</span>
<span id="cb22-6"><a href="#cb22-6" tabindex="-1"></a><span class="co"># descreveCSAP(listaOPS) # Retorna o erro: "O vetor precisa ter os 19 grupos da Lista Brasileira.</span></span>
<span id="cb22-7"><a href="#cb22-7" tabindex="-1"></a><span class="co">#   Se essa for a lista 'Alfradique' use 'tabCSAP'.""</span></span>
<span id="cb22-8"><a href="#cb22-8" tabindex="-1"></a><span class="fu">tabCSAP</span>(listaOPS<span class="sc">$</span>grupo)</span>
<span id="cb22-9"><a href="#cb22-9" tabindex="-1"></a>                                 grupo  casos perctot percsap</span>
<span id="cb22-10"><a href="#cb22-10" tabindex="-1"></a><span class="dv">1</span>               <span class="fl">1.</span> Prev. por vacinação    <span class="dv">127</span>    <span class="fl">0.02</span>    <span class="fl">0.13</span></span>
<span id="cb22-11"><a href="#cb22-11" tabindex="-1"></a><span class="dv">2</span>            <span class="fl">2.</span> Outras cond. evitáveis   <span class="dv">1316</span>    <span class="fl">0.21</span>    <span class="fl">1.31</span></span>
<span id="cb22-12"><a href="#cb22-12" tabindex="-1"></a><span class="dv">3</span>                   <span class="fl">3.</span> Gastroenterites   <span class="dv">4205</span>    <span class="fl">0.68</span>    <span class="fl">4.20</span></span>
<span id="cb22-13"><a href="#cb22-13" tabindex="-1"></a><span class="dv">4</span>                            <span class="fl">4.</span> Anemia    <span class="dv">695</span>    <span class="fl">0.11</span>    <span class="fl">0.69</span></span>
<span id="cb22-14"><a href="#cb22-14" tabindex="-1"></a><span class="dv">5</span>               <span class="fl">5.</span> Defic. nutricionais   <span class="dv">1765</span>    <span class="fl">0.29</span>    <span class="fl">1.76</span></span>
<span id="cb22-15"><a href="#cb22-15" tabindex="-1"></a><span class="dv">6</span>   <span class="fl">6.</span> Infec. ouvido, nariz e garganta    <span class="dv">954</span>    <span class="fl">0.15</span>    <span class="fl">0.95</span></span>
<span id="cb22-16"><a href="#cb22-16" tabindex="-1"></a><span class="dv">7</span>            <span class="fl">7.</span> Pneumonias bacterianas   <span class="dv">5425</span>    <span class="fl">0.88</span>    <span class="fl">5.41</span></span>
<span id="cb22-17"><a href="#cb22-17" tabindex="-1"></a><span class="dv">8</span>                              <span class="fl">8.</span> Asma   <span class="dv">3443</span>    <span class="fl">0.56</span>    <span class="fl">3.44</span></span>
<span id="cb22-18"><a href="#cb22-18" tabindex="-1"></a><span class="dv">9</span>                 <span class="fl">9.</span> <span class="fu">Pulmonares</span> (DPOC)  <span class="dv">11389</span>    <span class="fl">1.84</span>   <span class="fl">11.36</span></span>
<span id="cb22-19"><a href="#cb22-19" tabindex="-1"></a><span class="dv">10</span>                     <span class="fl">10.</span> Hipertensão   <span class="dv">1247</span>    <span class="fl">0.20</span>    <span class="fl">1.24</span></span>
<span id="cb22-20"><a href="#cb22-20" tabindex="-1"></a><span class="dv">11</span>                          <span class="fl">11.</span> Angina   <span class="dv">8421</span>    <span class="fl">1.36</span>    <span class="fl">8.40</span></span>
<span id="cb22-21"><a href="#cb22-21" tabindex="-1"></a><span class="dv">12</span>                 <span class="fl">12.</span> Insuf. cardíaca  <span class="dv">14119</span>    <span class="fl">2.29</span>   <span class="fl">14.09</span></span>
<span id="cb22-22"><a href="#cb22-22" tabindex="-1"></a><span class="dv">13</span>               <span class="fl">13.</span> Cerebrovasculares  <span class="dv">16426</span>    <span class="fl">2.66</span>   <span class="fl">16.39</span></span>
<span id="cb22-23"><a href="#cb22-23" tabindex="-1"></a><span class="dv">14</span>               <span class="fl">14.</span> Diabetes mellitus   <span class="dv">6784</span>    <span class="fl">1.10</span>    <span class="fl">6.77</span></span>
<span id="cb22-24"><a href="#cb22-24" tabindex="-1"></a><span class="dv">15</span>                      <span class="fl">15.</span> Epilepsias   <span class="dv">3293</span>    <span class="fl">0.53</span>    <span class="fl">3.29</span></span>
<span id="cb22-25"><a href="#cb22-25" tabindex="-1"></a><span class="dv">16</span>                 <span class="fl">16.</span> Infec. urinária  <span class="dv">11092</span>    <span class="fl">1.80</span>   <span class="fl">11.07</span></span>
<span id="cb22-26"><a href="#cb22-26" tabindex="-1"></a><span class="dv">17</span>        <span class="fl">17.</span> Infec. pele e subcutâneo   <span class="dv">3852</span>    <span class="fl">0.62</span>    <span class="fl">3.84</span></span>
<span id="cb22-27"><a href="#cb22-27" tabindex="-1"></a><span class="dv">18</span>   <span class="fl">18.</span> D. infl. órgãos pélvicos fem.   <span class="dv">1154</span>    <span class="fl">0.19</span>    <span class="fl">1.15</span></span>
<span id="cb22-28"><a href="#cb22-28" tabindex="-1"></a><span class="dv">19</span>         <span class="fl">19.</span> Úlcera gastrointestinal   <span class="dv">2261</span>    <span class="fl">0.37</span>    <span class="fl">2.26</span></span>
<span id="cb22-29"><a href="#cb22-29" tabindex="-1"></a><span class="dv">20</span>               <span class="fl">20.</span> Pré<span class="sc">-</span>natal e parto   <span class="dv">2260</span>    <span class="fl">0.37</span>    <span class="fl">2.25</span></span>
<span id="cb22-30"><a href="#cb22-30" tabindex="-1"></a><span class="dv">21</span>                          Total CSAP <span class="dv">100228</span>   <span class="fl">16.23</span>  <span class="fl">100.00</span></span>
<span id="cb22-31"><a href="#cb22-31" tabindex="-1"></a><span class="dv">22</span>                             No<span class="sc">-</span>CSAP <span class="dv">517199</span>   <span class="fl">83.77</span>      <span class="cn">NA</span></span>
<span id="cb22-32"><a href="#cb22-32" tabindex="-1"></a><span class="dv">23</span>                Total de internações <span class="dv">617427</span>  <span class="fl">100.00</span>      <span class="cn">NA</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="calcular-taxas">Calcular taxas<a class="anchor" aria-label="anchor" href="#calcular-taxas"></a>
</h3>
<p><strong>Exemplo: cálculo das taxas brutas de ICSAP por grupo de causa em Cerro Largo, RS, 2021:</strong></p>
<p>O código IBGE (os seis primeiros dígitos) de Cerro Largo é “430520”.</p>
<div class="section level4">
<h4 id="as-icsap">As ICSAP<a class="anchor" aria-label="anchor" href="#as-icsap"></a>
</h4>
<p>Selecionamos as informações sobre residentes de Cerro Largo em nosso banco de dados da AIH em 2021.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a>claih <span class="ot">&lt;-</span> AIHRS2021 <span class="sc">%&gt;%</span> </span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a>  <span class="fu">filter</span>(MUNIC_RES <span class="sc">==</span> <span class="st">"430520"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a>  <span class="fu">droplevels</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb23-4"><a href="#cb23-4" tabindex="-1"></a>  <span class="fu">csapAIH</span>()</span>
<span id="cb23-5"><a href="#cb23-5" tabindex="-1"></a>Importados <span class="dv">753</span> registros.</span>
<span id="cb23-6"><a href="#cb23-6" tabindex="-1"></a>Excluídos <span class="dv">46</span> (<span class="dv">6</span>,<span class="dv">1</span>%) registros de procedimentos obstétricos.</span>
<span id="cb23-7"><a href="#cb23-7" tabindex="-1"></a>Excluídos <span class="cn">NA</span> (<span class="cn">NA</span>%) registros de AIH de longa permanência.</span>
<span id="cb23-8"><a href="#cb23-8" tabindex="-1"></a>Exportados <span class="dv">707</span> (<span class="dv">93</span>,<span class="dv">9</span>%) registros.</span></code></pre></div>
</div>
<div class="section level4">
<h4 id="a-população">A população<a class="anchor" aria-label="anchor" href="#a-popula%C3%A7%C3%A3o"></a>
</h4>
<p>Desde que o DATASUS interrompeu a publicação dos arquivos com as estimativas populacionais por sexo e faixa etária para os municípios brasileiros (último arquivo no FTP é da população em 2012), passou a ser necessária a tabulação no TABNET e posterior leitura dos dados no programa de análise. Ano passado (2022) Raphael Saldanha dispôs-se ao trabalho de fazer as muitas <a href="http://tabnet.datasus.gov.br/cgi/deftohtm.exe?ibge/cnv/popsvsbr.def" class="external-link">tabulações necessárias</a> e nos brindou outro excelente e muito esperado pacote preenchendo essa lacuna: <a href="https://rfsaldanha.github.io/brpop/" class="external-link">brpop</a>, com as as estimativas da população por sexo e faixa etária para os municípios brasileiros, de 2000 a 2021 (<a href="http://tabnet.datasus.gov.br/cgi/IBGE/NT-POPULACAO-RESIDENTE-2000-2021.PDF" class="external-link">Nota técnica</a>).</p>
<p>Entretanto, as tabelas no pacote <em>brpop</em> têm o total (a soma da população nas diferentes faixas etárias), e os rótulos das faixas etárias são longos e estão em inglês, por isso resolvi criar outra função (<code>popbr2000_2021</code>) que retornasse a população com os rótulos em português e apenas com a população estimada em cada faixa etária (sem o total). Assim, a população estimada para Cerro Largo em 2021 foi capturada com o seguinte comando,</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a>clpop <span class="ot">&lt;-</span> csapAIH<span class="sc">::</span><span class="fu">popbr2000_2021</span>(<span class="dv">2021</span>, <span class="at">munic =</span> <span class="st">"430520"</span>)</span>
<span id="cb24-2"><a href="#cb24-2" tabindex="-1"></a>Setting <span class="st">`</span><span class="at">max_tries = 2</span><span class="st">`</span>.</span>
<span id="cb24-3"><a href="#cb24-3" tabindex="-1"></a>Setting <span class="st">`</span><span class="at">max_tries = 2</span><span class="st">`</span>.</span></code></pre></div>
<p>Com o pacote brpop, teríamos de acrescentar o filtro de exclusão da categoria “Total” na faixa etária e os resultados seriam os mesmos, porém com outra estrutura do objeto e outros rótulos de categorias:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a>clpop <span class="sc">%&gt;%</span> </span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a>  <span class="fu">group_by</span>(fxetar5, sexo) <span class="sc">%&gt;%</span> </span>
<span id="cb25-3"><a href="#cb25-3" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">pop =</span> <span class="fu">sum</span>(pop)) <span class="sc">%&gt;%</span> </span>
<span id="cb25-4"><a href="#cb25-4" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">pivot_wider</span>(<span class="at">names_from =</span> sexo, <span class="at">values_from =</span> pop)</span>
<span id="cb25-5"><a href="#cb25-5" tabindex="-1"></a><span class="st">`</span><span class="at">summarise()</span><span class="st">`</span> has grouped output by <span class="st">'fxetar5'</span>. You can override using the</span>
<span id="cb25-6"><a href="#cb25-6" tabindex="-1"></a><span class="st">`</span><span class="at">.groups</span><span class="st">`</span> argument.</span>
<span id="cb25-7"><a href="#cb25-7" tabindex="-1"></a><span class="co"># A tibble: 17 × 3</span></span>
<span id="cb25-8"><a href="#cb25-8" tabindex="-1"></a><span class="co"># Groups:   fxetar5 [17]</span></span>
<span id="cb25-9"><a href="#cb25-9" tabindex="-1"></a>   fxetar5  masc   fem</span>
<span id="cb25-10"><a href="#cb25-10" tabindex="-1"></a>   <span class="sc">&lt;</span>fct<span class="sc">&gt;</span>   <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span></span>
<span id="cb25-11"><a href="#cb25-11" tabindex="-1"></a> <span class="dv">1</span> <span class="dv">0-4</span>       <span class="dv">390</span>   <span class="dv">372</span></span>
<span id="cb25-12"><a href="#cb25-12" tabindex="-1"></a> <span class="dv">2</span> <span class="dv">5-9</span>       <span class="dv">408</span>   <span class="dv">393</span></span>
<span id="cb25-13"><a href="#cb25-13" tabindex="-1"></a> <span class="dv">3</span> <span class="dv">10-14</span>     <span class="dv">417</span>   <span class="dv">344</span></span>
<span id="cb25-14"><a href="#cb25-14" tabindex="-1"></a> <span class="dv">4</span> <span class="dv">15-19</span>     <span class="dv">434</span>   <span class="dv">370</span></span>
<span id="cb25-15"><a href="#cb25-15" tabindex="-1"></a> <span class="dv">5</span> <span class="dv">20-24</span>     <span class="dv">493</span>   <span class="dv">431</span></span>
<span id="cb25-16"><a href="#cb25-16" tabindex="-1"></a> <span class="dv">6</span> <span class="dv">25-29</span>     <span class="dv">552</span>   <span class="dv">503</span></span>
<span id="cb25-17"><a href="#cb25-17" tabindex="-1"></a> <span class="dv">7</span> <span class="dv">30-34</span>     <span class="dv">603</span>   <span class="dv">517</span></span>
<span id="cb25-18"><a href="#cb25-18" tabindex="-1"></a> <span class="dv">8</span> <span class="dv">35-39</span>     <span class="dv">572</span>   <span class="dv">500</span></span>
<span id="cb25-19"><a href="#cb25-19" tabindex="-1"></a> <span class="dv">9</span> <span class="dv">40-44</span>     <span class="dv">512</span>   <span class="dv">450</span></span>
<span id="cb25-20"><a href="#cb25-20" tabindex="-1"></a><span class="dv">10</span> <span class="dv">45-49</span>     <span class="dv">461</span>   <span class="dv">430</span></span>
<span id="cb25-21"><a href="#cb25-21" tabindex="-1"></a><span class="dv">11</span> <span class="dv">50-54</span>     <span class="dv">463</span>   <span class="dv">499</span></span>
<span id="cb25-22"><a href="#cb25-22" tabindex="-1"></a><span class="dv">12</span> <span class="dv">55-59</span>     <span class="dv">529</span>   <span class="dv">486</span></span>
<span id="cb25-23"><a href="#cb25-23" tabindex="-1"></a><span class="dv">13</span> <span class="dv">60-64</span>     <span class="dv">453</span>   <span class="dv">440</span></span>
<span id="cb25-24"><a href="#cb25-24" tabindex="-1"></a><span class="dv">14</span> <span class="dv">65-69</span>     <span class="dv">348</span>   <span class="dv">383</span></span>
<span id="cb25-25"><a href="#cb25-25" tabindex="-1"></a><span class="dv">15</span> <span class="dv">70-74</span>     <span class="dv">243</span>   <span class="dv">308</span></span>
<span id="cb25-26"><a href="#cb25-26" tabindex="-1"></a><span class="dv">16</span> <span class="dv">75-79</span>     <span class="dv">167</span>   <span class="dv">219</span></span>
<span id="cb25-27"><a href="#cb25-27" tabindex="-1"></a><span class="dv">17</span> <span class="dv">80</span> e <span class="sc">+</span>    <span class="dv">192</span>   <span class="dv">361</span></span>
<span id="cb25-28"><a href="#cb25-28" tabindex="-1"></a>brpop<span class="sc">::</span><span class="fu">mun_sex_pop</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb25-29"><a href="#cb25-29" tabindex="-1"></a>  <span class="fu">filter</span>(code_muni <span class="sc">==</span> <span class="st">"430520"</span>, year <span class="sc">==</span> <span class="dv">2021</span>, age_group <span class="sc">!=</span> <span class="st">"Total"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb25-30"><a href="#cb25-30" tabindex="-1"></a>  <span class="fu">group_by</span>(age_group, sex) <span class="sc">%&gt;%</span> </span>
<span id="cb25-31"><a href="#cb25-31" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">pop =</span> <span class="fu">sum</span>(pop)) <span class="sc">%&gt;%</span> </span>
<span id="cb25-32"><a href="#cb25-32" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">pivot_wider</span>(<span class="at">names_from =</span> sex, <span class="at">values_from =</span> pop)</span>
<span id="cb25-33"><a href="#cb25-33" tabindex="-1"></a><span class="st">`</span><span class="at">summarise()</span><span class="st">`</span> has grouped output by <span class="st">'age_group'</span>. You can override using the</span>
<span id="cb25-34"><a href="#cb25-34" tabindex="-1"></a><span class="st">`</span><span class="at">.groups</span><span class="st">`</span> argument.</span>
<span id="cb25-35"><a href="#cb25-35" tabindex="-1"></a><span class="co"># A tibble: 17 × 3</span></span>
<span id="cb25-36"><a href="#cb25-36" tabindex="-1"></a><span class="co"># Groups:   age_group [17]</span></span>
<span id="cb25-37"><a href="#cb25-37" tabindex="-1"></a>   age_group             Female  Male</span>
<span id="cb25-38"><a href="#cb25-38" tabindex="-1"></a>   <span class="sc">&lt;</span>chr<span class="sc">&gt;</span>                  <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>int<span class="sc">&gt;</span></span>
<span id="cb25-39"><a href="#cb25-39" tabindex="-1"></a> <span class="dv">1</span> From <span class="dv">0</span> to <span class="dv">4</span> years        <span class="dv">372</span>   <span class="dv">390</span></span>
<span id="cb25-40"><a href="#cb25-40" tabindex="-1"></a> <span class="dv">2</span> From <span class="dv">10</span> to <span class="dv">14</span> years      <span class="dv">344</span>   <span class="dv">417</span></span>
<span id="cb25-41"><a href="#cb25-41" tabindex="-1"></a> <span class="dv">3</span> From <span class="dv">15</span> to <span class="dv">19</span> years      <span class="dv">370</span>   <span class="dv">434</span></span>
<span id="cb25-42"><a href="#cb25-42" tabindex="-1"></a> <span class="dv">4</span> From <span class="dv">20</span> to <span class="dv">24</span> years      <span class="dv">431</span>   <span class="dv">493</span></span>
<span id="cb25-43"><a href="#cb25-43" tabindex="-1"></a> <span class="dv">5</span> From <span class="dv">25</span> to <span class="dv">29</span> years      <span class="dv">503</span>   <span class="dv">552</span></span>
<span id="cb25-44"><a href="#cb25-44" tabindex="-1"></a> <span class="dv">6</span> From <span class="dv">30</span> to <span class="dv">34</span> years      <span class="dv">517</span>   <span class="dv">603</span></span>
<span id="cb25-45"><a href="#cb25-45" tabindex="-1"></a> <span class="dv">7</span> From <span class="dv">35</span> to <span class="dv">39</span> years      <span class="dv">500</span>   <span class="dv">572</span></span>
<span id="cb25-46"><a href="#cb25-46" tabindex="-1"></a> <span class="dv">8</span> From <span class="dv">40</span> to <span class="dv">44</span> years      <span class="dv">450</span>   <span class="dv">512</span></span>
<span id="cb25-47"><a href="#cb25-47" tabindex="-1"></a> <span class="dv">9</span> From <span class="dv">45</span> to <span class="dv">49</span> years      <span class="dv">430</span>   <span class="dv">461</span></span>
<span id="cb25-48"><a href="#cb25-48" tabindex="-1"></a><span class="dv">10</span> From <span class="dv">5</span> to <span class="dv">9</span> years        <span class="dv">393</span>   <span class="dv">408</span></span>
<span id="cb25-49"><a href="#cb25-49" tabindex="-1"></a><span class="dv">11</span> From <span class="dv">50</span> to <span class="dv">54</span> years      <span class="dv">499</span>   <span class="dv">463</span></span>
<span id="cb25-50"><a href="#cb25-50" tabindex="-1"></a><span class="dv">12</span> From <span class="dv">55</span> to <span class="dv">59</span> years      <span class="dv">486</span>   <span class="dv">529</span></span>
<span id="cb25-51"><a href="#cb25-51" tabindex="-1"></a><span class="dv">13</span> From <span class="dv">60</span> to <span class="dv">64</span> years      <span class="dv">440</span>   <span class="dv">453</span></span>
<span id="cb25-52"><a href="#cb25-52" tabindex="-1"></a><span class="dv">14</span> From <span class="dv">65</span> to <span class="dv">69</span> years      <span class="dv">383</span>   <span class="dv">348</span></span>
<span id="cb25-53"><a href="#cb25-53" tabindex="-1"></a><span class="dv">15</span> From <span class="dv">70</span> to <span class="dv">74</span> years      <span class="dv">308</span>   <span class="dv">243</span></span>
<span id="cb25-54"><a href="#cb25-54" tabindex="-1"></a><span class="dv">16</span> From <span class="dv">75</span> to <span class="dv">79</span> years      <span class="dv">219</span>   <span class="dv">167</span></span>
<span id="cb25-55"><a href="#cb25-55" tabindex="-1"></a><span class="dv">17</span> From <span class="dv">80</span> years or more    <span class="dv">361</span>   <span class="dv">192</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="a-tabela-com-as-taxas">A tabela com as taxas<a class="anchor" aria-label="anchor" href="#a-tabela-com-as-taxas"></a>
</h4>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cte</span> <span class="op">&lt;-</span> <span class="fl">1e5</span></span>
<span><span class="fu"><a href="reference/tabCSAP.html">tabCSAP</a></span><span class="op">(</span><span class="va">claih</span><span class="op">$</span><span class="va">grupo</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>taxa <span class="op">=</span> <span class="va">casos</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">clpop</span><span class="op">$</span><span class="va">pop</span><span class="op">)</span><span class="op">*</span><span class="va">cte</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span>format.args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>decimal.mark <span class="op">=</span> <span class="st">","</span>, big.mark <span class="op">=</span> <span class="st">"."</span><span class="op">)</span>, digits <span class="op">=</span> <span class="fl">1</span>, </span>
<span>               caption <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"ICSAP em Cerro Largo, RS, 2021. Taxas por"</span>, </span>
<span>                               <span class="fu">Rcoisas</span><span class="fu">::</span><span class="fu">formatL</span><span class="op">(</span><span class="va">cte</span>, digits <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>, <span class="st">"hab."</span><span class="op">)</span><span class="op">)</span> </span></code></pre></div>
<table style="width:100%;" class="table">
<colgroup>
<col width="53%">
<col width="9%">
<col width="12%">
<col width="12%">
<col width="12%">
</colgroup>
<thead><tr class="header">
<th align="left">grupo</th>
<th align="right">casos</th>
<th align="right">perctot</th>
<th align="right">percsap</th>
<th align="right">taxa</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">1. Prev. vacinação e cond. evitáveis</td>
<td align="right">2</td>
<td align="right">0,3</td>
<td align="right">1,9</td>
<td align="right">14,0</td>
</tr>
<tr class="even">
<td align="left">2. Gastroenterites</td>
<td align="right">6</td>
<td align="right">0,8</td>
<td align="right">5,6</td>
<td align="right">42,1</td>
</tr>
<tr class="odd">
<td align="left">3. Anemia</td>
<td align="right">0</td>
<td align="right">0,0</td>
<td align="right">0,0</td>
<td align="right">0,0</td>
</tr>
<tr class="even">
<td align="left">4. Defic. nutricionais</td>
<td align="right">0</td>
<td align="right">0,0</td>
<td align="right">0,0</td>
<td align="right">0,0</td>
</tr>
<tr class="odd">
<td align="left">5. Infec. ouvido, nariz e garganta</td>
<td align="right">2</td>
<td align="right">0,3</td>
<td align="right">1,9</td>
<td align="right">14,0</td>
</tr>
<tr class="even">
<td align="left">6. Pneumonias bacterianas</td>
<td align="right">20</td>
<td align="right">2,8</td>
<td align="right">18,5</td>
<td align="right">140,4</td>
</tr>
<tr class="odd">
<td align="left">7. Asma</td>
<td align="right">1</td>
<td align="right">0,1</td>
<td align="right">0,9</td>
<td align="right">7,0</td>
</tr>
<tr class="even">
<td align="left">8. Pulmonares (DPOC)</td>
<td align="right">13</td>
<td align="right">1,8</td>
<td align="right">12,0</td>
<td align="right">91,3</td>
</tr>
<tr class="odd">
<td align="left">9. Hipertensão</td>
<td align="right">1</td>
<td align="right">0,1</td>
<td align="right">0,9</td>
<td align="right">7,0</td>
</tr>
<tr class="even">
<td align="left">10. Angina</td>
<td align="right">3</td>
<td align="right">0,4</td>
<td align="right">2,8</td>
<td align="right">21,1</td>
</tr>
<tr class="odd">
<td align="left">11. Insuf. cardíaca</td>
<td align="right">13</td>
<td align="right">1,8</td>
<td align="right">12,0</td>
<td align="right">91,3</td>
</tr>
<tr class="even">
<td align="left">12. Cerebrovasculares</td>
<td align="right">7</td>
<td align="right">1,0</td>
<td align="right">6,5</td>
<td align="right">49,1</td>
</tr>
<tr class="odd">
<td align="left">13. Diabetes mellitus</td>
<td align="right">10</td>
<td align="right">1,4</td>
<td align="right">9,3</td>
<td align="right">70,2</td>
</tr>
<tr class="even">
<td align="left">14. Epilepsias</td>
<td align="right">2</td>
<td align="right">0,3</td>
<td align="right">1,9</td>
<td align="right">14,0</td>
</tr>
<tr class="odd">
<td align="left">15. Infec. urinária</td>
<td align="right">24</td>
<td align="right">3,4</td>
<td align="right">22,2</td>
<td align="right">168,5</td>
</tr>
<tr class="even">
<td align="left">16. Infec. pele e subcutâneo</td>
<td align="right">4</td>
<td align="right">0,6</td>
<td align="right">3,7</td>
<td align="right">28,1</td>
</tr>
<tr class="odd">
<td align="left">17. D. infl. órgãos pélvicos fem.</td>
<td align="right">0</td>
<td align="right">0,0</td>
<td align="right">0,0</td>
<td align="right">0,0</td>
</tr>
<tr class="even">
<td align="left">18. Úlcera gastrointestinal</td>
<td align="right">0</td>
<td align="right">0,0</td>
<td align="right">0,0</td>
<td align="right">0,0</td>
</tr>
<tr class="odd">
<td align="left">19. Pré-natal e parto</td>
<td align="right">0</td>
<td align="right">0,0</td>
<td align="right">0,0</td>
<td align="right">0,0</td>
</tr>
<tr class="even">
<td align="left">Total CSAP</td>
<td align="right">108</td>
<td align="right">15,3</td>
<td align="right">100,0</td>
<td align="right">758,3</td>
</tr>
<tr class="odd">
<td align="left">No-CSAP</td>
<td align="right">599</td>
<td align="right">84,7</td>
<td align="right">NA</td>
<td align="right">4.205,6</td>
</tr>
<tr class="even">
<td align="left">Total de internações</td>
<td align="right">707</td>
<td align="right">100,0</td>
<td align="right">NA</td>
<td align="right">4.963,8</td>
</tr>
</tbody>
</table>
<p>ICSAP em Cerro Largo, RS, 2021. Taxas por 100.000 hab.</p>
</div>
</div>
<div class="section level3">
<h3 id="gráficos">Gráficos<a class="anchor" aria-label="anchor" href="#gr%C3%A1ficos"></a>
</h3>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gr</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/desenhaCSAP.html">desenhaCSAP</a></span><span class="op">(</span><span class="va">csap</span>, titulo <span class="op">=</span> <span class="st">"auto"</span>, onde <span class="op">=</span> <span class="st">"RS"</span>, quando <span class="op">=</span> <span class="fl">2018</span>, limsup <span class="op">=</span> <span class="fl">.18</span>, x.size <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span>
<span><span class="va">gr</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-27-1.png" width="50%" style="display: block; margin: auto;"></p>
<div class="section level4">
<h4 id="estratificado-por-categorias-de-outra-variável-presente-no-banco-de-dados">Estratificado por categorias de outra variável presente no banco de dados:<a class="anchor" aria-label="anchor" href="#estratificado-por-categorias-de-outra-vari%C3%A1vel-presente-no-banco-de-dados"></a>
</h4>
<p>Observe que ao estratificar o gráfico mantém a ordenação por frequência da variável em seu todo, sem a estratificação, quando o argumento <code>ordenar = TRUE</code>(padrão).</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rot</span> <span class="op">&lt;-</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/as_labeller.html" class="external-link">as_labeller</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"masc"</span> <span class="op">=</span> <span class="st">"Masculino"</span>, <span class="st">"fem"</span> <span class="op">=</span> <span class="st">"Feminino"</span>, <span class="st">"(all)"</span> <span class="op">=</span> <span class="st">"Total"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">gr</span> <span class="op">+</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html" class="external-link">facet_grid</a></span><span class="op">(</span><span class="op">~</span> <span class="va">sexo</span>, margins <span class="op">=</span> <span class="cn">TRUE</span>, labeller <span class="op">=</span> <span class="va">rot</span><span class="op">)</span></span>
<span></span>
<span><span class="va">gr</span> <span class="op">+</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="op">~</span> <span class="va">munres</span> <span class="op">==</span> <span class="st">"431490"</span>, </span>
<span>                         labeller <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/as_labeller.html" class="external-link">as_labeller</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"FALSE"</span> <span class="op">=</span> <span class="st">"Interior"</span>, </span>
<span>                                                           <span class="st">"TRUE"</span> <span class="op">=</span> <span class="st">"Capital"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-28-1.png" width="75%" style="display: block; margin: auto;"><img src="reference/figures/README-unnamed-chunk-28-2.png" width="75%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span> <span class="va">DORS2021</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">SEXO</span><span class="op">)</span>, <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">idade</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="reference/desenhaCSAP.html">desenhaCSAP</a></span><span class="op">(</span>x.size <span class="op">=</span> <span class="fl">7</span>, y.size <span class="op">=</span> <span class="fl">8</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html" class="external-link">facet_grid</a></span><span class="op">(</span><span class="va">SEXO</span> <span class="op">~</span> <span class="va">fxetar3</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="reference/figures/README-unnamed-chunk-29-1.png" alt="Mortalidade por CSAP por grupos de causa, por sexo e faixa etária. RS, 2021." width="80%"><p class="caption">
Mortalidade por CSAP por grupos de causa, por sexo e faixa etária. RS, 2021.
</p>
</div>
<hr>
<p><strong><em>Veja o manual do pacote em:</em></strong> <a href="https://github.com/fulvionedel/csapAIH/blob/master/docs/csapAIH_0.0.4.5.pdf" class="external-link uri">https://github.com/fulvionedel/csapAIH/blob/master/docs/csapAIH_0.0.4.5.pdf</a></p>
<!-- You'll still need to render `README.Rmd` regularly, to keep `README.md` up-to-date. `devtools::build_readme()` is handy for this. You could also use GitHub Actions to re-render `README.Rmd` every time you push. An example workflow can be found here: <https://github.com/r-lib/actions/tree/v1/examples>. -->
</div>
</div>
</div>
</div>
<div class="section level1">
<h1 id="agradecimentos">Agradecimentos<a class="anchor" aria-label="anchor" href="#agradecimentos"></a>
</h1>
<p>Agradeço a todxs os usuárixs do pacote, particularmente a quem informa problemas e sugere mudanças, como @laiovictor e @igortadeu @rafadbarros, e (muito!!) a quem apresenta soluções, como @denis-or.</p>
<p>E, sempre, meus profundos agradecimentos a</p>
<ul>
<li>Daniela Petruzalek, pelo pacote <a href="https://cran.r-project.org/web/packages/read.dbc/index.html" class="external-link">read.dbc</a>; e</li>
<li>A Raphael Saldanha, pelos pacotes <a href="https://github.com/rfsaldanha/microdatasus" class="external-link">microdatasus</a> e <a href="https://github.com/rfsaldanha/brpop" class="external-link">brpop</a>.</li>
</ul>
</div>
<div class="section level1">
<h1 id="referências">Referências<a class="anchor" aria-label="anchor" href="#refer%C3%AAncias"></a>
</h1>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-Alfradique2009" class="csl-entry">
Alfradique, Maria Elmira, Palmira de Fátima Bonolo, Inês Dourado, Maria Fernanda Lima-Costa, James Macinko, Claunara Schilling Mendonça, Veneza Berenice Oliveira, Luís Fernando Rolim Sampaio, Carmen de Simoni, and Maria Aparecida Turci. 2009. “<span class="nocase">Interna<span class="nocase">ç</span><span class="nocase">õ</span>es por condi<span class="nocase">ç</span><span class="nocase">õ</span>es sens<span class="nocase">í</span>veis <span class="nocase">à</span> aten<span class="nocase">ç</span><span class="nocase">ã</span>o prim<span class="nocase">á</span>ria: a constru<span class="nocase">ç</span><span class="nocase">ã</span>o da lista brasileira como ferramenta para medir o desempenho do sistema de sa<span class="nocase">ú</span>de (Projeto ICSAP - Brasil)</span>.” <em>Cadernos de Saúde Pública</em> 25 (6): 1337–49. <a href="https://doi.org/10.1590/S0102-311X2009000600016" class="external-link uri">https://doi.org/10.1590/S0102-311X2009000600016</a>.
</div>
<div id="ref-MS2008lista" class="csl-entry">
Brasil. Ministério da Saúde. Secretaria de Atenção à Saúde. 2008. “<span class="nocase">Portaria Nº 221, de 17 de abril de 2008.</span>” Ministério da Saúde. <a href="https://bvsms.saude.gov.br/bvs/saudelegis/sas/2008/prt0221_17_04_2008.html" class="external-link uri">https://bvsms.saude.gov.br/bvs/saudelegis/sas/2008/prt0221_17_04_2008.html</a>.
</div>
<div id="ref-NedelTese" class="csl-entry">
Nedel, Fúlvio Borges. 2009. “<span class="nocase">Interna<span class="nocase">ç</span><span class="nocase">õ</span>es hospitalares evit<span class="nocase">á</span>veis pela aten<span class="nocase">ç</span><span class="nocase">ã</span>o prim<span class="nocase">á</span>ria: estudo do impacto do Programa Sa<span class="nocase">ú</span>de da Fam<span class="nocase">ı́</span>lia sobre as interna<span class="nocase">ç</span><span class="nocase">õ</span>es por Condi<span class="nocase">ç</span><span class="nocase">õ</span>es Sens<span class="nocase">ı́</span>veis <span class="nocase">à</span> Aten<span class="nocase">ç</span><span class="nocase">ã</span>o Prim<span class="nocase">á</span>ria no Rio Grande do Sul, Brasil.</span>” PhD thesis, Pelotas, RS: Universidade Federal de Pelotas - UFPel. <a href="http://repositorio.ufpel.edu.br:8080/bitstream/prefix/3654/1/tese%20nedel.pdf" class="external-link uri">http://repositorio.ufpel.edu.br:8080/bitstream/prefix/3654/1/tese%20nedel.pdf</a>.
</div>
<div id="ref-Nedel2017" class="csl-entry">
———. 2017. “<span class="nocase">csapAIH: uma fun<span class="nocase">ç</span><span class="nocase">ã</span>o para a classifica<span class="nocase">ç</span><span class="nocase">ã</span>o das condi<span class="nocase">ç</span><span class="nocase">õ</span>es sens<span class="nocase">í</span>veis <span class="nocase">à</span> aten<span class="nocase">ç</span><span class="nocase">ã</span>o prim<span class="nocase">á</span>ria no programa estat<span class="nocase">í</span>stico R</span>.” <em>Epidemiologia e Serviços de Saúde</em> 26 (01): 199–209. <a href="https://doi.org/10.5123/S1679-49742017000100021" class="external-link uri">https://doi.org/10.5123/S1679-49742017000100021</a>.
</div>
<div id="ref-Nedel2019" class="csl-entry">
———. 2019. “<span class="nocase">Pacote csapAIH: a Lista Brasileira de Interna<span class="nocase">ç</span><span class="nocase">õ</span>es por Condi<span class="nocase">ç</span><span class="nocase">õ</span>es Sens<span class="nocase">í</span>veis <span class="nocase">à</span> Aten<span class="nocase">ç</span><span class="nocase">ã</span>o Prim<span class="nocase">á</span>ria no programa R</span>.” <em>Epidemiologia e Serviços de Saúde</em> 28 (2): e2019084. <a href="https://doi.org/10.5123/S1679-49742019000200021" class="external-link uri">https://doi.org/10.5123/S1679-49742019000200021</a>.
</div>
<div id="ref-Nedel2011" class="csl-entry">
Nedel, Fúlvio Borges, Luiz Augusto Facchini, João Luiz Bastos, and Miguel Martín-Mateo. 2011. “<span class="nocase">Conceptual and methodological aspects in the study of hospitalizations for ambulatory care sensitive conditions</span>.” <em>Ciência &amp; Saúde Coletiva</em> 16 (SUPPL. 1): 1145–54. <a href="https://doi.org/10.1590/S1413-81232011000700046" class="external-link uri">https://doi.org/10.1590/S1413-81232011000700046</a>.
</div>
<div id="ref-Nedel2008" class="csl-entry">
Nedel, Fúlvio Borges, Luiz Augusto Facchini, Miguel Martín-Mateo, Lúcia Azambuja Saraiva Vieira, and Elaine Thumé. 2008. “<span class="nocase">Programa Sa<span class="nocase">ú</span>de da Fam<span class="nocase">í</span>lia e condi<span class="nocase">ç</span><span class="nocase">õ</span>es sens<span class="nocase">í</span>veis <span class="nocase">à</span> aten<span class="nocase">ç</span><span class="nocase">ã</span>o prim<span class="nocase">á</span>ria, Bag<span class="nocase">é</span> (RS)</span>.” <em>Rev Saude Publica</em> 42 (6): 1041–52. <a href="https://www.scielo.br/j/rsp/a/NHNcRYsk8kwv4KYZqRD6S8c/?lang=pt" class="external-link uri">https://www.scielo.br/j/rsp/a/NHNcRYsk8kwv4KYZqRD6S8c/?lang=pt</a>.
</div>
<div id="ref-OPS2014" class="csl-entry">
Organización Panamericana de la Salud (OPS). 2014. <em><span class="nocase">Compendio de indicadores del impacto y resultados intermedios. Plan estrat<span class="nocase">é</span>gico de la OPS 2014-2019: “En pro de la salud: Desarrollo sostenible y equidad”</span></em>. Edited by OPS. Washington. <a href="https://www.paho.org/hq/dmdocuments/2016/ops-pe-14-19-compendium-indicadores-nov-2014.pdf" class="external-link uri">https://www.paho.org/hq/dmdocuments/2016/ops-pe-14-19-compendium-indicadores-nov-2014.pdf</a>.
</div>
<div id="ref-readdbc" class="csl-entry">
Petruzalek, Daniela. 2016. <em>Read.dbc: Read Data Stored in DBC (Compressed DBF) Files</em>. <a href="https://CRAN.R-project.org/package=read.dbc" class="external-link uri">https://CRAN.R-project.org/package=read.dbc</a>.
</div>
<div id="ref-brpopref" class="csl-entry">
Saldanha, Raphael. 2022. “Brpop: Brazilian Population Estimatives.” <a href="https://CRAN.R-project.org/package=brpop" class="external-link uri">https://CRAN.R-project.org/package=brpop</a>.
</div>
<div id="ref-Saldanha2019" class="csl-entry">
Saldanha, Raphael de Freitas, Ronaldo Rocha Bastos, and Christovam Barcellos. 2019. “<span class="nocase">Microdatasus: pacote para download e pr<span class="nocase">é</span>-processamento de microdados do Departamento de Inform<span class="nocase">á</span>tica do SUS (DATASUS)</span>.” <em>Cadernos de Saúde Pública</em> 35 (9): e00032419. <a href="https://doi.org/10.1590/0102-311x00032419" class="external-link uri">https://doi.org/10.1590/0102-311x00032419</a>.
</div>
</div>
</div>


  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/fulvionedel/csapAIH/" class="external-link">Browse source code</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>GPL (&gt;= 3)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing csapAIH</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Fúlvio B. Nedel <br><small class="roles"> Maintainer </small>  </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Fúlvio B. Nedel.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
