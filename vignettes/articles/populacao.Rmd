---
title: "Estimativas populacionais por sexo e faixa etária para os municípios brasileiros, 1980 - 2024."
date: |
  | Em atualização
  <!-- | Atualizado em  -->
  | `r format(Sys.Date(), c("%d de %B de %Y"))`
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = NULL
)
```

```{r setup, message=FALSE}
library(csapAIH)
library(dplyr) # facilitar o trabalho
```

Com a atualização das estimativas populacionais após o Censo 2022, o Departamento de Informática do SUS (DATASUS) voltou a disponibilizar arquivos com as contagens e estimativas da população por sexo e faixa etária para os municípios brasileiros. 

ftp://ftp.datasus.gov.br/dissemin/publicos/IBGE/POP/ e ftp://ftp.datasus.gov.br/dissemin/publicos/IBGE/POPSVS/

as estimativas populacionais por sexo e faixa etária para os municípios 

Desde que o DATASUS interrompeu a publicação dos arquivos com as estimativas populacionais por sexo e faixa etária para os municípios brasileiros (último arquivo no FTP é da população em 2012), passou a ser necessária a tabulação no TABNET e posterior leitura dos dados no programa de análise. Em 2022 Raphael Saldanha dispôs-se ao trabalho de fazer as muitas [tabulações necessárias](http://tabnet.datasus.gov.br/cgi/deftohtm.exe?ibge/cnv/popsvsbr.def) e nos brindou outro excelente e muito esperado pacote preenchendo essa lacuna: [brpop](https://rfsaldanha.github.io/brpop/), com as as estimativas da população por sexo e faixa etária para os municípios brasileiros, de 2000 a 2021 ([Nota técnica](http://tabnet.datasus.gov.br/cgi/IBGE/NT-POPULACAO-RESIDENTE-2000-2021.PDF)). 

Entretanto, as tabelas no pacote *brpop* têm o total (a soma da população nas diferentes faixas etárias), e os rótulos das faixas etárias são longos e estão em inglês, por isso resolvi criar outra função (`popbr2000_2021`) que retornasse a população com os rótulos em português e apenas com a população estimada em cada faixa etária (sem o total). Assim, a população estimada para Cerro Largo em 2021 foi capturada com o seguinte comando,

```{r}
clpop <- csapAIH::popbr2000_2021(2021, munic = "430520")
```

Com o pacote brpop, teríamos de acrescentar o filtro de exclusão da categoria "Total" na faixa etária e os resultados seriam os mesmos, porém com outra estrutura do objeto e outros rótulos de categorias:

```{r}
clpop %>% 
  group_by(fxetar5, sexo) %>% 
  summarise(pop = sum(pop)) %>% 
  tidyr::pivot_wider(names_from = sexo, values_from = pop)
brpop::mun_sex_pop() %>% 
  filter(code_muni == "430520", year == 2021, age_group != "Total") %>% 
  group_by(age_group, sex) %>% 
  summarise(pop = sum(pop)) %>% 
  tidyr::pivot_wider(names_from = sex, values_from = pop)
```

