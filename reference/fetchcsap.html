<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="pt"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Baixa os arquivos da AIH e classifica as internações em CSAP — fetchcsap • csapAIH</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Baixa os arquivos da AIH e classifica as internações em CSAP — fetchcsap"><meta name="description" content='Descarrega os "arquivos da AIH" (arquivos RD&amp;lt;UFAAMM&amp;gt;.DBC das Bases de Dados do Sistema de Informações Hospitalares do SUS - BD-SIH/SUS) do site FTP do DATASUS e classifica as internações segundo a Lista Brasileira de Condições Sensíveis à Atenção Primária.'><meta property="og:description" content='Descarrega os "arquivos da AIH" (arquivos RD&amp;lt;UFAAMM&amp;gt;.DBC das Bases de Dados do Sistema de Informações Hospitalares do SUS - BD-SIH/SUS) do site FTP do DATASUS e classifica as internações segundo a Lista Brasileira de Condições Sensíveis à Atenção Primária.'></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">csapAIH</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.4.6</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/exemplos.html">Exemplos de uso</a></li>
    <li><a class="dropdown-item" href="../articles/populacao.html">Estimativas populacionais por sexo e faixa etária para os municípios brasileiros, 1980 - 2024.</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/fulvionedel/csapAIH/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Baixa os arquivos da AIH e classifica as internações em CSAP</h1>
      <small class="dont-index">Source: <a href="https://github.com/fulvionedel/csapAIH/blob/v0.0.4.6/R/fetchcsap.R" class="external-link"><code>R/fetchcsap.R</code></a></small>
      <div class="d-none name"><code>fetchcsap.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Descarrega os "arquivos da AIH" (arquivos RD&lt;UFAAMM&gt;.DBC das Bases de Dados do Sistema de Informações Hospitalares do SUS - BD-SIH/SUS) do site FTP do DATASUS e classifica as internações segundo a Lista Brasileira de Condições Sensíveis à Atenção Primária.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">fetchcsap</span><span class="op">(</span></span>
<span>  uf <span class="op">=</span> <span class="st">"all"</span>,</span>
<span>  <span class="va">anoinicio</span>,</span>
<span>  mesinicio <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  anofim <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  mesfim <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  periodo <span class="op">=</span> <span class="st">"interna"</span>,</span>
<span>  cep <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  cnes <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-uf">uf<a class="anchor" aria-label="anchor" href="#arg-uf"></a></dt>
<dd><p>Unidade da Federação. A sigla da UF ou um vetor com as siglas das UF de interesse, entre aspas e em letras maiúsculas. Para todo o Brasil (padrão), use "all".</p></dd>


<dt id="arg-anoinicio">anoinicio<a class="anchor" aria-label="anchor" href="#arg-anoinicio"></a></dt>
<dd><p>Ano de competência da AIH para início da seleção dos dados, em formato numérico; sem padrão.</p></dd>


<dt id="arg-mesinicio">mesinicio<a class="anchor" aria-label="anchor" href="#arg-mesinicio"></a></dt>
<dd><p>Mês de competência da AIH para início da seleção dos dados, em formato numérico; por padrão é 1.</p></dd>


<dt id="arg-anofim">anofim<a class="anchor" aria-label="anchor" href="#arg-anofim"></a></dt>
<dd><p>Ano de competência da AIH para fim da seleção dos dados, em formato numérico; por padrão é igual ao ano seguinte ao ano de início (<code>anoinicio + 1</code>).</p></dd>


<dt id="arg-mesfim">mesfim<a class="anchor" aria-label="anchor" href="#arg-mesfim"></a></dt>
<dd><p>Mês de competência da AIH para fim da seleção dos dados, em formato numérico; por padrão é 6 (junho). V. detalhes.</p></dd>


<dt id="arg-periodo">periodo<a class="anchor" aria-label="anchor" href="#arg-periodo"></a></dt>
<dd><p>O período definido refere-se ao mês e ano de "competência" da AIH ou à data de internação? O padrão (<code>"interna"</code>) é a internação. V. detahes.</p></dd>


<dt id="arg-cep">cep<a class="anchor" aria-label="anchor" href="#arg-cep"></a></dt>
<dd><p>CEP de internação</p></dd>


<dt id="arg-cnes">cnes<a class="anchor" aria-label="anchor" href="#arg-cnes"></a></dt>
<dd><p>CNES do estabelecimento que gerou a AIH</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Permite o uso de outros parâmetros de <code><a href="csapAIH.html">csapAIH</a></code></p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Um objeto de classes <code>data.table</code> e <code>data.frame</code> com as seguintes variáveis:</p><ul><li><p><code>munres</code> Município de residência do paciente</p></li>
<li><p><code>munint</code> Município de internação do paciente</p></li>
<li><p><code>sexo</code> Sexo do paciente</p></li>
<li><p><code>idade</code> Idade do paciente em anos completos</p></li>
<li><p><code>fxetar5</code> Faixa etária quinquenal (0-4, ..., 76-79, 80 e +)</p></li>
<li><p><code>csap</code> Internação por CSAP (sim/não)</p></li>
<li><p><code>grupo</code> Grupo de causa da Lista Brasileira de ICSAP, ou "não-CSAP"</p></li>
<li><p><code>cid</code> Diagnóstico principal da internação, segundo a Classificação Internacional de Doenças, 10ª Revisão</p></li>
<li><p><code>data.inter</code> Data da internação</p></li>
<li><p><code>data.saida</code> Data da alta</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>- Período de download dos arquivos e de internação dos sujeitos.</p><ul><li><p>Os "arquivos da AIH" são definidos por mês e ano de "competência", e não da data de internação. Assim, o arquivo de um determinado "mês de competência" pode incluir registros de internações ocorridas em outro mês ou ano, enquanto pode não incluir todos os casos ocorridos naquele mês. Por padrão, <code>fetchcsap</code> usa o argumento <code>periodo = "interna"</code> para selecionar os casos por data de internação de acordo com o período definido nos argumentos <code>anoinicio</code>, <code>mesinicio</code> e <code>anofim</code>, de modo a iniciar no primeiro dia do ano e mês de competência (<code>anoinicio</code> e <code>mesinicio</code>) e terminar em 31 de dezembro do ano anterior ao definido em <code>anofim</code>.</p></li>
<li><p>Assim, por padrão, a função exige apenas a definição do ano de início dos casos. Se o usuário definir apenas esse argumento, <code>fetchcsap</code> fará o download e leitura dos arquivos (de todo o Brasil) de todos os meses até junho do ano seguinte para então selecionar as internações ocorridas no ano definido em <code>anoinicio</code>.</p></li>
</ul><p>- <code>fetchcsap</code> é apenas uma abreviatura para um uso específico da função <code>fetch_datasus</code>, do pacote <code>microdatasus</code>, de Raphael Saldanha. Funciona apenas com o SIH/SUS, através do argumento <code>information_system = "SIH-RD"</code>, e faz apenas o download das variáveis exigidas pela função <code>csapAIH</code>, i.e., <code>DIAG_PRINC, NASC, DT_INTER, DT_SAIDA, IDADE, COD_IDADE, MUNIC_RES, MUNIC_MOV, SEXO, N_AIH, PROC_REA, IDENT, CEP, CNES</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="csapAIH.html">csapAIH</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Internações de todo o Brasil, ocorridas no ano de 2023 e registradas até jun/2024:</span></span></span>
<span class="r-in"><span><span class="co"># Colocando apenas o ano, único argumento obrigatório, a função executa o</span></span></span>
<span class="r-in"><span><span class="co"># download dos arquivos RD??????.DBC de todas as UF de jan/2023 a jun/2024 e</span></span></span>
<span class="r-in"><span><span class="co"># então extrais apenas os registros com data de internação em 2023.</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span>  <span class="fu">fetchcsap</span><span class="op">(</span>anoinicio <span class="op">=</span> <span class="fl">2023</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span><span class="co"># Diferença entre o mês e ano de "competência" da AIH e a data de internação da pessoa,</span></span></span>
<span class="r-in"><span><span class="co"># exemplo com as internações no Acre, registradas no mês de competência jan 2023:</span></span></span>
<span class="r-in"><span><span class="va">ac.comp</span> <span class="op">&lt;-</span> <span class="fu">fetchcsap</span><span class="op">(</span><span class="st">"AC"</span>, <span class="fl">2023</span>, periodo <span class="op">=</span> <span class="st">'competencia'</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Your local Internet connection seems to be ok.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> DataSUS FTP server seems to be up and reachable.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Starting download...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Importados 4.165 registros.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Excluídos 1.179 (28,3%) registros de procedimentos obstétricos.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Excluídos 1 (0%) registros de AIH de longa permanência.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Exportados 2.985 (71,7%) registros.</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">ac.comp</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 2985</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">ac.comp</span><span class="op">$</span><span class="va">data.inter</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         Min.      1st Qu.       Median         Mean      3rd Qu.         Max. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> "2022-07-17" "2022-11-27" "2022-12-26" "2022-12-14" "2023-01-10" "2023-01-31" </span>
<span class="r-in"><span><span class="va">ac.int</span> <span class="op">&lt;-</span> <span class="fu">fetchcsap</span><span class="op">(</span><span class="st">"AC"</span>, <span class="fl">2023</span>, mesfim <span class="op">=</span> <span class="fl">1</span>, anofim <span class="op">=</span> <span class="fl">2023</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Your local Internet connection seems to be ok.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> DataSUS FTP server seems to be up and reachable.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Starting download...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Importados 1.917 registros.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Excluídos 672 (35,1%) registros de procedimentos obstétricos.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Excluídos NA (NA%) registros de AIH de longa permanência.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Exportados 1.245 (64,9%) registros.</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">ac.int</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1245</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">ac.int</span><span class="op">$</span><span class="va">data.inter</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         Min.      1st Qu.       Median         Mean      3rd Qu.         Max. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> "2023-01-01" "2023-01-06" "2023-01-12" "2023-01-12" "2023-01-18" "2023-01-31" </span>
<span class="r-in"><span><span class="co"># Assim, há</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">ac.comp</span><span class="op">)</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">ac.int</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1740</span>
<span class="r-in"><span><span class="co"># internações registradas naquele mês de competência, mas que ocorreram em outro momento.</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Fúlvio B. Nedel.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

